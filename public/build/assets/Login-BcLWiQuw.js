import{r as a,m as v,j as e,a as N}from"./app-C8ch__MT.js";import{C as g}from"./circle-alert-Ckh5lFWI.js";import{E as k,a as E}from"./eye-SYMwZCnG.js";import{L as h}from"./loader-circle-CHnrNxWK.js";import"./createLucideIcon-CZ1-AwOY.js";function O(){const[l,f]=a.useState(!1),[p,i]=a.useState("idle"),[m,c]=a.useState(null),{data:n,setData:o,errors:d,setError:b,clearErrors:j}=v({email:"",password:"",remember:!1,gps_location:null,device_id:null}),[u,x]=a.useState(!1);a.useEffect(()=>{o("device_id",(()=>{const r=window.navigator,t=window.screen,y=[r.userAgent,t.height,t.width,t.colorDepth,new Date().getTimezoneOffset()];return btoa(y.join("|")).substring(0,32)})())},[]),a.useEffect(()=>{navigator.geolocation?(i("loading"),navigator.geolocation.getCurrentPosition(s=>{const r=`${s.coords.latitude},${s.coords.longitude}`;o("gps_location",r),i("success")},s=>{console.error("Error getting location:",s.message),i("error")},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})):(console.log("Geolocation is not supported by this browser."),i("error"))},[]);const w=async s=>{s.preventDefault(),x(!0),c(null),j();try{const r=await N.post(route("auth.check"),n);r.data.status==="OK"&&(window.location.href=r.data.redirect)}catch(r){r.response?r.response.data.errors?Object.keys(r.response.data.errors).forEach(t=>{b(t,r.response.data.errors[t][0])}):r.response.data.message&&c(r.response.data.message):c("Network error. Please try again.")}finally{x(!1)}};return e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 p-4",children:e.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-lg shadow-md",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"mt-2 text-center text-3xl font-extrabold text-gray-900",children:"Welcome"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Please sign in to your account"})]}),m&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(g,{className:"h-5 w-5 mr-2"}),e.jsx("span",{className:"block sm:inline",children:m})]})}),Object.keys(d).length>0&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(g,{className:"h-5 w-5 mr-2"}),e.jsx("span",{className:"block sm:inline",children:d.email||d.password||"Please correct the errors below"})]})}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:w,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),e.jsx("input",{id:"email",type:"email",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:n.email,onChange:s=>o("email",s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",type:l?"text":"password",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",value:n.password,onChange:s=>o("password",s.target.value)}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>f(!l),children:l?e.jsx(k,{className:"h-5 w-5 text-gray-400"}):e.jsx(E,{className:"h-5 w-5 text-gray-400"})})]})]})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember",type:"checkbox",className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded",checked:n.remember,onChange:s=>o("remember",s.target.checked)}),e.jsx("label",{htmlFor:"remember",className:"ml-2 block text-sm text-gray-900",children:"Remember me"})]})}),p==="loading"&&e.jsxs("div",{className:"flex items-center justify-center text-sm text-gray-500",children:[e.jsx(h,{className:"h-4 w-4 mr-2 animate-spin"}),e.jsx("span",{children:"Getting location..."})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:u,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:u?e.jsx(h,{className:"h-5 w-5 animate-spin"}):"Sign in"})})]})]})})}export{O as default};
