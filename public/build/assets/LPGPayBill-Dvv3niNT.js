import{r as t,j as e,a as p}from"./app-Blkrgucg.js";import{A as G}from"./AdminLayout-BZaLjAUQ.js";import"./x-BA5kj9x-.js";import"./createLucideIcon-D6ItMOu3.js";import"./log-out-DG7o0bjv.js";const A=()=>{const[s,x]=t.useState({canumber:"",referenceid:"",amount:"",operator:""}),[r,i]=t.useState(null),[o,c]=t.useState(!1),[d,b]=t.useState(!1),[u,y]=t.useState([]),[g,m]=t.useState(!1),j=[{id:17,name:"Mahanagar Gas Limited"},{id:34,name:"Indraprastha Gas"},{id:35,name:"Gujarat Gas Company Limited"},{id:49,name:"Adani Gas"},{id:68,name:"Siti Energy"},{id:80,name:"Haryana City Gas"},{id:84,name:"Sabarmati Gas Limited (SGL)"},{id:86,name:"Tripura Natural Gas"},{id:100,name:"Unique Central Piped Gases Pvt Ltd (UCPGPL)"},{id:101,name:"Vadodara Gas Limited"},{id:107,name:"Maharashtra Natural Gas Limited"},{id:113,name:"Charotar Gas Sahakari Mandali Ltd"},{id:122,name:"Aavantika Gas Ltd"},{id:124,name:"Central U.P. Gas Limited"},{id:129,name:"Indian Oil-Adani Gas Private Limited"},{id:139,name:"Gail Gas Limited"},{id:141,name:"IRM Energy Private Limited"},{id:156,name:"Green Gas Limited (GGL)"},{id:172,name:"Assam Gas Company Limited"},{id:177,name:"Bhagyanagar Gas Limited"},{id:194,name:"Sanwariya Gas Limited"},{id:282,name:"Megha Gas"},{id:283,name:"Torrent Gas Moradabad Limited (Formerly Siti Energy Limited)"},{id:286,name:"Indane Gas"}],l=a=>{x({...s,[a.target.name]:a.target.value})},N=async a=>{a.preventDefault(),c(!0),i(null);try{const n=await p.post("/pay-lpg-bill",s);i(n.data),d&&h()}catch(n){console.error("API Error:",n),i({error:"Failed to fetch API response"})}finally{c(!1)}},h=async()=>{m(!0);try{const a=await p.get("/lpg-bill-history");y(a.data)}catch(a){console.error("Failed to fetch transactions:",a)}finally{m(!1)}},f=()=>{b(!d),d||h()};return e.jsxs(G,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-xl font-bold",children:"LPG Bill Payment"}),e.jsx("button",{onClick:f,className:"bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:d?"Hide History":"View History"})]}),e.jsxs("form",{onSubmit:N,className:"space-y-3",children:[e.jsx("input",{type:"text",name:"canumber",placeholder:"Enter CA Number",value:s.canumber,onChange:l,required:!0,className:"border p-2 w-full"}),e.jsx("input",{type:"text",name:"referenceid",placeholder:"Enter Reference ID",value:s.referenceid,onChange:l,required:!0,className:"border p-2 w-full"}),e.jsx("input",{type:"number",name:"amount",placeholder:"Enter Amount",value:s.amount,onChange:l,required:!0,className:"border p-2 w-full"}),e.jsxs("select",{name:"operator",value:s.operator,onChange:l,required:!0,className:"border p-2 w-full",children:[e.jsx("option",{value:"",children:"Select Operator"}),j.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]}),e.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",disabled:o,children:o?"Processing...":"Pay Bill"})]}),r&&e.jsxs("div",{className:"mt-6 border border-gray-300 p-3",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"API Response:"}),r.error?e.jsx("p",{className:"text-red-500",children:r.error}):e.jsxs("table",{className:"table-auto w-full border-collapse border border-gray-400",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-200",children:[e.jsx("th",{className:"border border-gray-400 px-4 py-2",children:"Status"}),e.jsx("th",{className:"border border-gray-400 px-4 py-2",children:"Response Code"}),e.jsx("th",{className:"border border-gray-400 px-4 py-2",children:"Operator ID"}),e.jsx("th",{className:"border border-gray-400 px-4 py-2",children:"Ack No"}),e.jsx("th",{className:"border border-gray-400 px-4 py-2",children:"Message"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-400 px-4 py-2",children:r.status?"Success":"Failed"}),e.jsx("td",{className:"border border-gray-400 px-4 py-2",children:r.response_code}),e.jsx("td",{className:"border border-gray-400 px-4 py-2",children:r.operatorid}),e.jsx("td",{className:"border border-gray-400 px-4 py-2",children:r.ackno}),e.jsx("td",{className:"border border-gray-400 px-4 py-2",children:r.message})]})})]})]}),d&&e.jsxs("div",{className:"mt-8",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Transaction History"}),g?e.jsx("div",{className:"text-center p-4",children:"Loading history..."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"p-3 text-left border",children:"Date"}),e.jsx("th",{className:"p-3 text-left border",children:"CA Number"}),e.jsx("th",{className:"p-3 text-left border",children:"Reference ID"}),e.jsx("th",{className:"p-3 text-left border",children:"Amount"}),e.jsx("th",{className:"p-3 text-left border",children:"Operator"}),e.jsx("th",{className:"p-3 text-left border",children:"Status"}),e.jsx("th",{className:"p-3 text-left border",children:"Ack No"}),e.jsx("th",{className:"p-3 text-left border",children:"Message"})]})}),e.jsx("tbody",{children:u.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"p-3 border",children:new Date(a.created_at).toLocaleDateString()}),e.jsx("td",{className:"p-3 border",children:a.canumber}),e.jsx("td",{className:"p-3 border",children:a.referenceid}),e.jsxs("td",{className:"p-3 border",children:["â‚¹",a.amount]}),e.jsx("td",{className:"p-3 border",children:a.operator}),e.jsx("td",{className:"p-3 border",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-sm ${a.status==="Success"?"bg-green-100 text-green-800":a.status==="Pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:a.status})}),e.jsx("td",{className:"p-3 border",children:a.ackno}),e.jsx("td",{className:"p-3 border",children:a.message})]},a.id))})]})})]})]})};export{A as default};
