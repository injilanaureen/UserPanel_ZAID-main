import{r,j as e}from"./app-scOM1Bov.js";import{A as f}from"./AdminLayout-CpYTA3QK.js";import{L as y}from"./loader-circle-BUZhiRtK.js";import"./x-Dbx5JJsn.js";import"./createLucideIcon-B6EbXdE0.js";const S=()=>{const[a,g]=r.useState(""),[h,c]=r.useState(!1),[d,i]=r.useState(null),[p,u]=r.useState(null),[o,n]=r.useState(null),m=()=>{var t;return(t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content")},x=async t=>{try{const l=await(await fetch("/admin/busTicket/storeTripDetails",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":m()},body:JSON.stringify({trip_id:a,raw_data:t})})).json();if(console.log("Store trip details response:",l),!l.status)throw new Error(l.message||"Failed to save trip details");n({type:"success",message:"Trip details saved successfully"})}catch(s){n({type:"error",message:`Error storing trip details: ${s.message||"Unknown error"}`})}},b=async()=>{if(!a){i("Please enter a Trip ID.");return}c(!0),i(null),u(null),n(null);try{const t=await fetch("/admin/busTicket/fetchTripDetails",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":m()},body:JSON.stringify({trip_id:a})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const s=await t.json();if(!s.status)throw new Error(s.message||"Failed to fetch trip details");console.log("API Response:",s),u(s.data),await x(s.data)}catch(t){console.error("Error details:",t),i(t.message||"Failed to load trip details")}c(!1)};return e.jsx(f,{children:e.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("div",{className:"bg-gradient-to-tr from-gray-400 to-black py-4 px-6 mb-4",children:e.jsx("h2",{className:"text-3xl font-semibold text-white",children:"Enter Trip ID"})}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("input",{type:"text",className:"border rounded-lg px-4 py-2 w-full",placeholder:"Enter Trip ID...",value:a,onChange:t=>g(t.target.value)}),e.jsx("button",{className:"bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600",onClick:b,children:"Fetch Details"})]})]}),h&&e.jsx("div",{className:"flex items-center justify-center min-h-64",children:e.jsx(y,{className:"animate-spin h-8 w-8 text-blue-500"})}),d&&e.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-red-600",children:d})}),o&&e.jsx("div",{className:`p-4 border rounded-lg ${o.type==="success"?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:e.jsx("p",{className:o.type==="success"?"text-green-600":"text-red-600",children:o.message})}),p&&e.jsxs("div",{className:"bg-white shadow rounded-lg p-6 space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Raw Trip Details"}),e.jsx("pre",{className:"bg-gray-100 p-4 rounded-lg overflow-auto",children:JSON.stringify(p,null,2)})]})]})})};export{S as default};
