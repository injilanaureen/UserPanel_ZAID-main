import{r as i,j as e}from"./app-B0SP-3g-.js";import{A as T}from"./AdminLayout-C45CkXrQ.js";import{L as P}from"./loader-circle-BU9Rx8dP.js";import{S as A}from"./search-uEDVzXNV.js";import"./x-CqCn1OOM.js";import"./createLucideIcon-BFMlvqXK.js";import"./log-out-DMWLlFNM.js";const $=()=>{const[w,y]=i.useState([]),[g,N]=i.useState(!0),[f,v]=i.useState(null),[l,S]=i.useState(""),[x,C]=i.useState("all"),[a,m]=i.useState(1),[p]=i.useState(10),[k,L]=i.useState([]);i.useEffect(()=>{(async()=>{try{const r=await fetch("/admin/busTicket/fetchSourceCities",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}});if(!r.ok)throw new Error("Network response was not ok");const s=await r.json();if(s.status&&s.data.cities){y(s.data.cities);const o=[...new Set(s.data.cities.map(d=>d.state))];L(o)}else throw new Error("Failed to fetch cities data")}catch(r){v(r.message)}finally{N(!1)}})()},[]);const n=w.filter(t=>{var o,d,b;const r=((o=t.name)==null?void 0:o.toLowerCase().includes(l.toLowerCase()))||!1||((d=t.state)==null?void 0:d.toLowerCase().includes(l.toLowerCase()))||!1||((b=t.id)==null?void 0:b.toString().includes(l))||!1,s=x==="all"||t.state===x;return r&&s}),u=a*p,j=u-p,E=n.slice(j,u),c=Math.ceil(n.length/p),h=t=>{m(t)};return e.jsx(T,{children:e.jsxs("div",{className:"relative",children:[g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg flex items-center flex-col gap-4",children:[e.jsx(P,{className:"h-12 w-12 animate-spin text-blue-500"}),e.jsx("p",{className:"text-gray-600",children:"Loading cities data..."})]})}),e.jsx("div",{className:`${g?"blur-sm":""} transition-all duration-300`,children:f?e.jsxs("div",{className:"text-red-500 p-4",children:["Error: ",f]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-gradient-to-tr from-gray-400 to-black py-4 px-6",children:e.jsx("h2",{className:"text-3xl font-semibold text-white",children:"Available Bus Source Cities"})}),e.jsxs("div",{className:"mb-6 mt-6 flex gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(A,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search cities, states, or IDs...",className:"pl-10 pr-4 py-2 w-full border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:l,onChange:t=>{S(t.target.value),m(1)}})]}),e.jsxs("select",{className:"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:x,onChange:t=>{C(t.target.value),m(1)},children:[e.jsx("option",{value:"all",children:"All States"}),k.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{className:"mb-4 text-sm text-gray-600",children:["Showing ",j+1,"-",Math.min(u,n.length)," of ",n.length," cities"]}),e.jsx("div",{className:"overflow-x-auto rounded-lg border border-gray-200",children:e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"City"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"State"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Coordinates"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map((t,r)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.id}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.state}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.locationType}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.latitude,", ",t.longitude]})]},t.id||r))})]})}),c>1&&e.jsxs("div",{className:"flex items-center justify-between mt-4 px-4",children:[e.jsx("button",{onClick:()=>h(a-1),disabled:a===1,className:"px-3 py-1 border rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("div",{className:"flex gap-2",children:[...Array(c)].map((t,r)=>{const s=r+1;return s===1||s===c||s>=a-2&&s<=a+2?e.jsx("button",{onClick:()=>h(s),className:`px-3 py-1 border rounded-md ${a===s?"bg-blue-500 text-white":"hover:bg-gray-100"}`,children:s},s):s===a-3||s===a+3?e.jsx("span",{children:"..."},s):null})}),e.jsx("button",{onClick:()=>h(a+1),disabled:a===c,className:"px-3 py-1 border rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})})]})})};export{$ as default};
