import{r as i,j as e}from"./app-BHbAvUQu.js";import{A as E}from"./AdminLayout-Cf-UMrdq.js";import{L as T}from"./loader-circle-C9iTCh4_.js";import{S as P}from"./search-C7UNPK3D.js";import"./x-DsxzDIZw.js";import"./createLucideIcon-DFKxodXL.js";const R=()=>{const[g,f]=i.useState([]),[j,b]=i.useState(!0),[p,y]=i.useState(null),[c,w]=i.useState(""),[o,N]=i.useState("all"),[a,d]=i.useState(1),[x]=i.useState(10),[S,v]=i.useState([]);i.useEffect(()=>{(async()=>{try{const r=await fetch("/admin/busTicket/fetchSourceCities",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}});if(!r.ok)throw new Error("Network response was not ok");const s=await r.json();if(s.status&&s.data.cities){f(s.data.cities);const k=[...new Set(s.data.cities.map(L=>L.state))];v(k)}else throw new Error("Failed to fetch cities data")}catch(r){y(r.message)}finally{b(!1)}})()},[]);const n=g.filter(t=>{const r=t.name.toLowerCase().includes(c.toLowerCase())||t.state.toLowerCase().includes(c.toLowerCase()),s=o==="all"||t.state===o;return r&&s}),m=a*x,h=m-x,C=n.slice(h,m),l=Math.ceil(n.length/x),u=t=>{d(t)};return j?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(T,{className:"h-8 w-8 animate-spin"})}):p?e.jsxs("div",{className:"text-red-500 p-4",children:["Error: ",p]}):e.jsx(E,{children:e.jsxs("div",{className:"",children:[e.jsx("div",{className:"bg-gradient-to-tr from-gray-400 to-black py-4 px-6",children:e.jsx("h2",{className:"text-3xl font-semibold text-white",children:"Available Bus Source Cities"})}),e.jsxs("div",{className:"mb-6 mt-6 flex gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(P,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search cities or states...",className:"pl-10 pr-4 py-2 w-full border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:c,onChange:t=>{w(t.target.value),d(1)}})]}),e.jsxs("select",{className:"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:o,onChange:t=>{N(t.target.value),d(1)},children:[e.jsx("option",{value:"all",children:"All States"}),S.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{className:"mb-4 text-sm text-gray-600",children:["Showing ",h+1,"-",Math.min(m,n.length)," of ",n.length," cities"]}),e.jsx("div",{className:"overflow-x-auto rounded-lg border border-gray-200",children:e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"City"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"State"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Coordinates"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:C.map((t,r)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.state}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.locationType}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.latitude,", ",t.longitude]})]},r))})]})}),l>1&&e.jsxs("div",{className:"flex items-center justify-between mt-4 px-4",children:[e.jsx("button",{onClick:()=>u(a-1),disabled:a===1,className:"px-3 py-1 border rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("div",{className:"flex gap-2",children:[...Array(l)].map((t,r)=>{const s=r+1;return s===1||s===l||s>=a-2&&s<=a+2?e.jsx("button",{onClick:()=>u(s),className:`px-3 py-1 border rounded-md ${a===s?"bg-blue-500 text-white":"hover:bg-gray-100"}`,children:s},s):s===a-3||s===a+3?e.jsx("span",{children:"..."},s):null})}),e.jsx("button",{onClick:()=>u(a+1),disabled:a===l,className:"px-3 py-1 border rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})})};export{R as default};
