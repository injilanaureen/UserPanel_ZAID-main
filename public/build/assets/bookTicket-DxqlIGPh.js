import{r as o,j as e,a as w}from"./app-BioXEUcn.js";import{A as C}from"./AdminLayout-CY-Lp9mv.js";import{T as _,a as T,b as f,c as h,d as B,e as y}from"./table-CNuCq1TU.js";import{T as E}from"./ticket-CAc5M9rI.js";import{B as j}from"./banknote-AVuDx9nK.js";import{P as F}from"./phone-BGY05vb-.js";import{M as z}from"./mail-Bsbv67tu.js";import{C as N}from"./code-D7l-q-Ny.js";import{C as A}from"./circle-alert-PP4MRzMD.js";import{C as S}from"./circle-check-big-Ccg14gts.js";import"./x-B_YNMEDK.js";import"./createLucideIcon-M0Y1IT9i.js";import"./log-out-C-ATL0f1.js";import"./utils-CiMRq3MP.js";import"./clsx-B-dksMZM.js";const Y=()=>{const[r,c]=o.useState({refid:"",amount:"",base_fare:"",passenger_phone:"",passenger_email:"",blockKey:""}),[d,m]=o.useState(!1),[u,l]=o.useState(""),[x,i]=o.useState(""),[p,g]=o.useState(null),[K,P]=o.useState([]),t=a=>{c({...r,[a.target.name]:a.target.value}),l(""),i("")},k=async a=>{var n,b;a.preventDefault(),m(!0),l(""),i(""),g(null);try{const s=await w.post("/admin/busTicket/bookticket",r,{headers:{"Content-Type":"application/json",Accept:"application/json"}});console.log("Full Response:",s.data),g(Array.isArray(s.data)?s.data:[s.data]),s.data.status?(i("Ticket booked successfully!"),c({refid:"",amount:"",base_fare:"",passenger_phone:"",passenger_email:"",blockKey:""})):l(s.data.message||"Failed to book ticket")}catch(s){console.error("Error booking ticket:",s.response?s.response.data:s.message);const v=((b=(n=s.response)==null?void 0:n.data)==null?void 0:b.message)||"Failed to book ticket";l(v)}finally{m(!1)}};return e.jsx(C,{children:e.jsx("div",{className:"max-w-full",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-100",children:[e.jsx("div",{className:"bg-gradient-to-tr from-gray-400 to-black py-4 px-6",children:e.jsx("h2",{className:"text-3xl font-semibold text-white",children:"Book Ticket"})}),e.jsxs("form",{onSubmit:k,className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"refid",className:"flex items-center text-sm font-medium text-gray-600 mb-1",children:[e.jsx(E,{size:20,className:"mr-2 text-green-500"}),"Reference ID"]}),e.jsx("input",{id:"refid",type:"number",name:"refid",value:r.refid,onChange:t,className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all",required:!0,placeholder:"Enter Reference ID"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"amount",className:"flex items-center text-sm font-medium text-gray-600 mb-1",children:[e.jsx(j,{size:20,className:"mr-2 text-blue-500"}),"Amount"]}),e.jsx("input",{id:"amount",type:"number",name:"amount",value:r.amount,onChange:t,className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all",required:!0,min:"1",placeholder:"Enter Amount"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"base_fare",className:"flex items-center text-sm font-medium text-gray-600 mb-1",children:[e.jsx(j,{size:20,className:"mr-2 text-blue-500"}),"Base Fare"]}),e.jsx("input",{id:"base_fare",type:"text",name:"base_fare",value:r.base_fare,onChange:t,className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all",required:!0,placeholder:"Enter Base Fare"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"passenger_phone",className:"flex items-center text-sm font-medium text-gray-600 mb-1",children:[e.jsx(F,{size:20,className:"mr-2 text-yellow-500"}),"Passenger Phone"]}),e.jsx("input",{id:"passenger_phone",type:"text",name:"passenger_phone",value:r.passenger_phone,onChange:t,className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all",required:!0,placeholder:"Enter Phone Number"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"passenger_email",className:"flex items-center text-sm font-medium text-gray-600 mb-1",children:[e.jsx(z,{size:20,className:"mr-2 text-purple-500"}),"Passenger Email"]}),e.jsx("input",{id:"passenger_email",type:"email",name:"passenger_email",value:r.passenger_email,onChange:t,className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all",required:!0,placeholder:"Enter Email"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"blockKey",className:"flex items-center text-sm font-medium text-gray-600 mb-1",children:[e.jsx(N,{size:20,className:"mr-2 text-red-500"}),"Block Key"]}),e.jsx("input",{id:"blockKey",type:"text",name:"blockKey",value:r.blockKey,onChange:t,className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all",required:!0,placeholder:"Enter Block Key"})]})]}),e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-gray-800 text-white py-3 px-4 rounded-lg hover:bg-black focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:d?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Booking..."]}):"Book Ticket"})]}),e.jsxs("div",{className:"px-6 pb-6",children:[u&&e.jsx("div",{className:"mt-4 p-4 bg-red-50 border border-red-100 rounded-lg",children:e.jsxs("p",{className:"text-red-600 text-sm flex items-center",children:[e.jsx(A,{size:16,className:"mr-2"}),u]})}),x&&e.jsx("div",{className:"mt-4 p-4 bg-green-50 border border-green-100 rounded-lg",children:e.jsxs("p",{className:"text-green-600 text-sm flex items-center",children:[e.jsx(S,{size:16,className:"mr-2"}),x]})}),p&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("h3",{className:"font-medium text-sm text-gray-700 mb-2 flex items-center",children:[e.jsx(N,{size:16,className:"mr-2"}),"API Response:"]}),e.jsx("div",{className:"border border-gray-200 rounded-lg shadow-md overflow-hidden",children:e.jsxs(_,{className:"w-full border-collapse",children:[e.jsx(T,{className:"bg-sky-500 text-white",children:e.jsxs(f,{children:[e.jsx(h,{className:"px-4 py-2 text-left",children:"Key"}),e.jsx(h,{className:"px-4 py-2 text-left",children:"Value"})]})}),e.jsx(B,{children:Object.entries(p[0]).map(([a,n])=>e.jsxs(f,{className:"border-b border-gray-200",children:[e.jsx(y,{className:"px-4 py-2 font-medium",children:a}),e.jsx(y,{className:"px-4 py-2",children:String(n)})]},a))})]})})]})]})]})})})};export{Y as default};
