import{r as a,m as S,a as k,j as e,S as T}from"./app-DFjKcsS4.js";import{A as H}from"./AdminLayout-DxBig_LM.js";import{T as _,a as z,b as u,c as l,d as B,e as i}from"./table-BFtSw3sU.js";import{P as A}from"./phone-HmYCPrXZ.js";import{c as E}from"./createLucideIcon-DJdPBuIl.js";import{T as M}from"./trash-2-O8BblkyV.js";import{C as g}from"./circle-alert-DLevqNDc.js";import{C as F}from"./circle-check-big-BjlY2fIG.js";import"./x-B4w2wPw6.js";import"./log-out-BiWHQM6Z.js";import"./utils-CiMRq3MP.js";import"./clsx-B-dksMZM.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],$=E("UserX",I),L=({type:r,message:s})=>e.jsx("div",{className:`p-4 rounded-lg ${r==="success"?"bg-green-50 border border-green-100 text-green-600":"bg-red-50 border border-red-100 text-red-600"}`,children:e.jsxs("p",{className:"text-sm flex items-center",children:[r==="success"?e.jsx(F,{size:16,className:"mr-2"}):e.jsx(g,{size:16,className:"mr-2"}),s]})}),P=({data:r})=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-4",children:"Deletion History"}),r.length===0?e.jsx("p",{className:"text-gray-500 text-sm",children:"No deletion history available."}):e.jsx("div",{className:"border border-gray-200 rounded-lg shadow-md overflow-hidden",children:e.jsxs(_,{className:"w-full border-collapse",children:[e.jsx(z,{className:"bg-sky-500 text-white",children:e.jsxs(u,{children:[e.jsx(l,{className:"px-4 py-2 text-left",children:"Mobile"}),e.jsx(l,{className:"px-4 py-2 text-left",children:"Bene ID"}),e.jsx(l,{className:"px-4 py-2 text-left",children:"Status"}),e.jsx(l,{className:"px-4 py-2 text-left",children:"Response Code"}),e.jsx(l,{className:"px-4 py-2 text-left",children:"Message"}),e.jsx(l,{className:"px-4 py-2 text-left",children:"Date"})]})}),e.jsx(B,{children:r.map((s,c)=>e.jsxs(u,{className:"border-b border-gray-200",children:[e.jsx(i,{className:"px-4 py-2",children:s.mobile}),e.jsx(i,{className:"px-4 py-2",children:s.bene_id}),e.jsx(i,{className:"px-4 py-2",children:e.jsx("span",{className:`text-sm ${s.status?"text-green-600":"text-red-600"}`,children:s.status?"Success":"Failed"})}),e.jsx(i,{className:"px-4 py-2",children:s.response_code}),e.jsx(i,{className:"px-4 py-2",children:s.message}),e.jsx(i,{className:"px-4 py-2",children:new Date(s.created_at).toLocaleString()})]},c))})]})})]}),Z=()=>{const[r,s]=a.useState("delete"),[c,o]=a.useState(!1),[x,m]=a.useState(null),[j,h]=a.useState(!1),[N,v]=a.useState([]),{data:d,setData:y,processing:b}=S({mobile:"",bene_id:""});a.useEffect(()=>{p()},[]);const p=async()=>{try{const t=await k.get(route("beneficiary2.getDeletionHistory"));v(t.data)}catch(t){console.error("Error fetching deletion history:",t)}},f=t=>{const{name:n,value:D}=t.target;y(n,D)},w=t=>{t.preventDefault(),o(!0)},C=()=>{T.post(route("beneficiary2.destroyBeneficiary"),d,{preserveScroll:!0,onSuccess:t=>{var n;(n=t==null?void 0:t.props)!=null&&n.flash&&(m(t.props.flash.message),h(t.props.flash.status),o(!1),y({mobile:"",bene_id:""}),p(),s("history"))},onError:()=>{m("Failed to delete beneficiary"),h(!1),o(!1)}})};return e.jsx(H,{children:e.jsx("div",{className:"max-w-full p-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-100",children:[e.jsx("div",{className:"bg-gradient-to-tr from-gray-400 to-black py-4 px-6",children:e.jsx("h2",{className:"text-3xl font-semibold text-white",children:"Delete Beneficiary"})}),e.jsxs("div",{className:"flex border-b border-gray-200 px-6 pt-4",children:[e.jsx("button",{className:`py-2 px-4 text-sm font-medium ${r==="delete"?"border-b-2 border-gray-800 text-gray-800":"text-gray-500 hover:text-gray-700"}`,onClick:()=>s("delete"),children:"Delete Beneficiary"}),e.jsx("button",{className:`py-2 px-4 text-sm font-medium ${r==="history"?"border-b-2 border-gray-800 text-gray-800":"text-gray-500 hover:text-gray-700"}`,onClick:()=>s("history"),children:"Deletion History"})]}),e.jsxs("div",{className:"p-6",children:[r==="delete"&&e.jsxs("div",{children:[x&&e.jsx(L,{type:j?"success":"error",message:x}),e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"mobile",className:"flex items-center text-sm font-medium text-gray-600 mb-1",children:[e.jsx(A,{size:20,className:"mr-2 text-yellow-500"}),"Mobile Number"]}),e.jsx("input",{id:"mobile",type:"text",name:"mobile",value:d.mobile,onChange:f,className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all",placeholder:"Enter 10-digit mobile number"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"bene_id",className:"flex items-center text-sm font-medium text-gray-600 mb-1",children:[e.jsx($,{size:20,className:"mr-2 text-red-500"}),"Beneficiary ID"]}),e.jsx("input",{id:"bene_id",type:"text",name:"bene_id",value:d.bene_id,onChange:f,className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all",placeholder:"Enter beneficiary ID"})]}),e.jsx("button",{type:"submit",disabled:b,className:"w-full bg-red-600 text-white py-3 px-4 rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:b?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx(M,{size:20,className:"mr-2"}),"Delete Beneficiary"]})})]})]}),r==="history"&&e.jsx(P,{data:N})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-lg max-w-md w-full",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-800 mb-4 flex items-center",children:[e.jsx(g,{size:20,className:"mr-2 text-red-500"}),"Confirm Deletion"]}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this beneficiary? This action cannot be undone."}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 rounded-lg border border-gray-200 hover:bg-gray-50 transition",children:"Cancel"}),e.jsx("button",{onClick:C,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 transition",children:"Confirm Delete"})]})]})})]})})})};export{Z as default};
