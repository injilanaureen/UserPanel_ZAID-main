import{K as C,r as d,j as e,S as F}from"./app-B34_OK17.js";import{A as E}from"./AdminLayout-Cnv0uzS_.js";import{C as v}from"./credit-card-DTrCHI30.js";import{B as z}from"./banknote-DySRMtDH.js";import{F as q}from"./file-text-DM8pgE8Q.js";import{C as A}from"./calendar-UmGpLlRU.js";import{c as B}from"./createLucideIcon-bMNoER0k.js";import{C as P}from"./circle-alert-CWkh8oYs.js";import{C as R}from"./circle-check-big-C2OElTn0.js";import"./x-CtcgUXMq.js";import"./log-out-oKJM1Ypg.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],G=B("Image",$),X=()=>{const{bankAccounts:I,errors:w}=C().props,m=d.useRef(null),[a,u]=d.useState({transactionType:"",amount:"",transactionId:"",depositedDate:"",bankId:"",image:null}),[y,x]=d.useState(!1),[g,p]=d.useState(""),[f,b]=d.useState(""),[j,c]=d.useState({}),T=[{label:"NEFT",value:"NEFT"},{label:"RTGS",value:"RTGS"},{label:"IMPS",value:"IMPS"}],N=t=>{const r={};if(!t)return r;const l=["image/jpeg","image/png","image/jpg"],o=5*1024*1024;return l.includes(t.type)||(r.image="Only JPEG, JPG, and PNG images are allowed"),t.size>o&&(r.image="Image size should not exceed 5MB"),r},i=t=>{const{name:r,value:l,files:o}=t.target;if(r==="image"){const n=o[0],S=N(n);u(h=>({...h,image:n})),c(h=>({...h,...S}))}else u(n=>({...n,[r]:l}));(j[r]||g||f)&&(c(n=>({...n,[r]:null})),p(""),b(""))},k=()=>{const t={};if(a.transactionType||(t.transactionType="Transaction Type is required"),a.amount?parseFloat(a.amount)<=0&&(t.amount="Amount must be greater than zero"):t.amount="Amount is required",a.transactionId||(t.transactionId="Transaction ID is required"),a.depositedDate||(t.depositedDate="Deposited Date is required"),a.bankId||(t.bankId="Bank selection is required"),a.image){const r=N(a.image);r.image&&(t.image=r.image)}return t},D=t=>{t.preventDefault(),x(!0),p(""),b("");const r=k();if(Object.keys(r).length>0){c(r),x(!1);return}const l=new FormData;Object.entries(a).forEach(([o,n])=>{n!==null&&n!==""&&l.append(o,n)}),F.post("/fundrequest/store",l,{forceFormData:!0,preserveState:!0,preserveScroll:!0,onSuccess:()=>{b("Fund request submitted successfully!"),u({transactionType:"",amount:"",transactionId:"",depositedDate:"",bankId:"",image:null}),c({}),m.current&&(m.current.value=null)},onError:o=>{p("Failed to submit fund request"),c(o)},onFinish:()=>{x(!1)}})},s={...j,...w};return e.jsx(E,{children:e.jsx("div",{className:"max-w-full",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-100",children:[e.jsx("div",{className:"bg-gradient-to-tr from-gray-400 to-black py-4 px-6",children:e.jsx("h2",{className:"text-3xl font-semibold text-white",children:"Fund Request"})}),e.jsxs("form",{onSubmit:D,className:"p-6",encType:"multipart/form-data",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"transactionType",className:"flex items-center text-sm font-medium text-gray-600 mb-1",children:[e.jsx(v,{size:20,className:"mr-2 text-green-500"}),"Transaction Type"]}),e.jsxs("select",{id:"transactionType",name:"transactionType",value:a.transactionType,onChange:i,className:`w-full px-4 py-2 bg-gray-50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all ${s.transactionType?"border-red-500":"border-gray-200"}`,children:[e.jsx("option",{value:"",children:"Select Type"}),T.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))]}),s.transactionType&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.transactionType})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"amount",className:"flex items-center text-sm font-medium text-gray-600 mb-1",children:[e.jsx(z,{size:20,className:"mr-2 text-blue-500"}),"Amount"]}),e.jsx("input",{id:"amount",name:"amount",type:"number",value:a.amount,onChange:i,className:`w-full px-4 py-2 bg-gray-50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all ${s.amount?"border-red-500":"border-gray-200"}`,placeholder:"Enter Amount",min:"1",step:"0.01"}),s.amount&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.amount})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"transactionId",className:"flex items-center text-sm font-medium text-gray-600 mb-1",children:[e.jsx(q,{size:20,className:"mr-2 text-yellow-500"}),"Transaction ID"]}),e.jsx("input",{id:"transactionId",name:"transactionId",type:"text",value:a.transactionId,onChange:i,className:`w-full px-4 py-2 bg-gray-50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all ${s.transactionId?"border-red-500":"border-gray-200"}`,placeholder:"Enter Transaction ID"}),s.transactionId&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.transactionId})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"depositedDate",className:"flex items-center text-sm font-medium text-gray-600 mb-1",children:[e.jsx(A,{size:20,className:"mr-2 text-purple-500"}),"Deposited Date"]}),e.jsx("input",{id:"depositedDate",name:"depositedDate",type:"date",value:a.depositedDate,onChange:i,className:`w-full px-4 py-2 bg-gray-50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all ${s.depositedDate?"border-red-500":"border-gray-200"}`,max:new Date().toISOString().split("T")[0]}),s.depositedDate&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.depositedDate})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"bankId",className:"flex items-center text-sm font-medium text-gray-600 mb-1",children:[e.jsx(v,{size:20,className:"mr-2 text-indigo-500"}),"Bank Account"]}),e.jsxs("select",{id:"bankId",name:"bankId",value:a.bankId,onChange:i,className:`w-full px-4 py-2 bg-gray-50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all ${s.bankId?"border-red-500":"border-gray-200"}`,children:[e.jsx("option",{value:"",children:"Select Bank Account"}),I.map(t=>e.jsxs("option",{value:t.id,children:[t.bank," - ",t.account_name," (****",t.account_number.slice(-4),")"]},t.id))]}),s.bankId&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.bankId})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"image",className:"flex items-center text-sm font-medium text-gray-600 mb-1",children:[e.jsx(G,{size:20,className:"mr-2 text-orange-500"}),"Upload Proof"]}),e.jsx("input",{ref:m,id:"image",name:"image",type:"file",onChange:i,accept:"image/jpeg,image/png,image/jpg",className:`w-full px-4 py-2 bg-gray-50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all ${s.image?"border-red-500":"border-gray-200"}`}),s.image&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.image})]})]}),e.jsx("button",{type:"submit",disabled:y,className:"w-full bg-gray-800 text-white py-3 px-4 rounded-lg hover:bg-black focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:y?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Submit Request"})]}),e.jsxs("div",{className:"px-6 pb-6",children:[g&&e.jsx("div",{className:"mt-4 p-4 bg-red-50 border border-red-100 rounded-lg",children:e.jsxs("p",{className:"text-red-600 text-sm flex items-center",children:[e.jsx(P,{size:16,className:"mr-2"}),g]})}),f&&e.jsx("div",{className:"mt-4 p-4 bg-green-50 border border-green-100 rounded-lg",children:e.jsxs("p",{className:"text-green-600 text-sm flex items-center",children:[e.jsx(R,{size:16,className:"mr-2"}),f]})})]})]})})})};export{X as default};
