import{r as a,j as e,a as u}from"./app-D6xuHKhj.js";import{A as j}from"./AdminLayout-DzwwN7zN.js";import"./x-D9XgczbE.js";import"./createLucideIcon-zjjfgVZR.js";const S=()=>{const[l,p]=a.useState(""),[s,n]=a.useState(null),[o,c]=a.useState(!1),[i,t]=a.useState(""),b=async()=>{var r,m,x;c(!0),t(""),n(null);try{const d=await u.post("/lpg-status",{referenceid:l},{headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":(r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content")}});d.data?n(d.data):t("Invalid response received from server")}catch(d){console.error("API Error:",d),t(((x=(m=d.response)==null?void 0:m.data)==null?void 0:x.message)||"Failed to fetch status. Please try again.")}finally{c(!1)}},h=r=>{if(r.preventDefault(),!l.trim()){t("Please enter a Reference ID");return}b()};return e.jsx(j,{children:e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"LPG Status Check"}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"referenceId",className:"block text-sm font-medium text-gray-700",children:"Reference ID"}),e.jsx("input",{id:"referenceId",type:"text",value:l,onChange:r=>p(r.target.value),placeholder:"Enter Reference ID",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsx("button",{type:"submit",className:"w-full bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:o,children:o?"Checking...":"Check Status"})]}),i&&e.jsx("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-red-600",children:i})}),s&&e.jsxs("div",{className:"mt-4 bg-gray-50 p-4 rounded-md",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Transaction Details"}),e.jsx("p",{className:`mt-2 font-semibold ${s.status?"text-green-600":"text-red-600"}`,children:s.message}),s.data&&e.jsx("div",{className:"mt-3 bg-white p-4 rounded shadow",children:e.jsx("table",{className:"w-full border-collapse border border-gray-300",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"border px-4 py-2 font-semibold",children:"Transaction ID"}),e.jsx("td",{className:"border px-4 py-2",children:s.data.txnid})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border px-4 py-2 font-semibold",children:"Operator Name"}),e.jsx("td",{className:"border px-4 py-2",children:s.data.operatorname})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border px-4 py-2 font-semibold",children:"Customer Number"}),e.jsx("td",{className:"border px-4 py-2",children:s.data.canumber})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border px-4 py-2 font-semibold",children:"Amount"}),e.jsxs("td",{className:"border px-4 py-2",children:["₹",s.data.amount]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border px-4 py-2 font-semibold",children:"TDS"}),e.jsxs("td",{className:"border px-4 py-2",children:["₹",s.data.tds]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border px-4 py-2 font-semibold",children:"Reference ID"}),e.jsx("td",{className:"border px-4 py-2",children:s.data.refid})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border px-4 py-2 font-semibold",children:"Operator ID"}),e.jsx("td",{className:"border px-4 py-2",children:s.data.operatorid})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border px-4 py-2 font-semibold",children:"Date Added"}),e.jsx("td",{className:"border px-4 py-2",children:s.data.dateadded})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border px-4 py-2 font-semibold",children:"Refunded"}),e.jsx("td",{className:"border px-4 py-2",children:s.data.refunded==="0"?"No":"Yes"})]}),s.data.daterefunded&&e.jsxs("tr",{children:[e.jsx("td",{className:"border px-4 py-2 font-semibold",children:"Date Refunded"}),e.jsx("td",{className:"border px-4 py-2",children:s.data.daterefunded})]})]})})})]})]})})};export{S as default};
