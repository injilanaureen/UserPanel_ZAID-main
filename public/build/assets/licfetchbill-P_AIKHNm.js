import{r,j as e,a as b}from"./app-C8ch__MT.js";const B=()=>{var c,o,d,h,m,u,p,x;const[a,j]=r.useState({canumber:"",ad1:"",ad2:"",mode:""}),[l,g]=r.useState(null),[i,v]=r.useState(null),n=s=>{j({...a,[s.target.name]:s.target.value})},f=async()=>{console.log("Sending Form Data:",a);try{const s=await b.post("https://sit.paysprint.in/service-api/api/v1/service/bill-payment/bill/fetchlicbill",a,{headers:{Authorisedkey:"Y2RkZTc2ZmNjODgxODljMjkyN2ViOTlhM2FiZmYyM2I=",Token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0aW1lc3RhbXAiOjE3NDAwMjk5NjEsInBhcnRuZXJJZCI6IlBTMDAxNTY4IiwicmVxaWQiOiIxNzQwMDI5OTYxIn0.FinP5ONFH5_lPJ6wPlHsYN1EjEsI1RuXM0IqlGvokHU",Accept:"application/json","Content-Type":"application/json"}});if(console.log("Received Bill Data:",s.data),g(s.data),s.data.status){const t={...a,...s.data,bill_fetch:s.data.bill_fetch||{}};console.log("Saving to DB:",t),N(t)}else alert("Bill fetch failed: "+s.data.message)}catch(s){console.error("Error fetching bill:",s)}};console.log(l);const N=async s=>{try{(await b.post("/save-bill",s,{headers:{"Content-Type":"application/json"}})).data.success?alert("Bill saved successfully!"):alert("Failed to save bill.")}catch(t){console.error("Error saving bill:",t)}},y=s=>{s.preventDefault(),f()};return e.jsxs("div",{className:"max-w-md mx-auto mt-10 p-5 bg-white rounded shadow-md",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Fetch LIC Bill"}),e.jsxs("form",{onSubmit:y,children:[e.jsxs("label",{className:"block mb-2",children:["Consumer Number:",e.jsx("input",{type:"text",name:"canumber",value:a.canumber,onChange:n,className:"w-full p-2 border rounded mt-1",required:!0})]}),e.jsxs("label",{className:"block mb-2",children:["Email:",e.jsx("input",{type:"email",name:"ad1",value:a.ad1,onChange:n,className:"w-full p-2 border rounded mt-1",required:!0})]}),e.jsxs("label",{className:"block mb-2",children:["Date:",e.jsx("input",{type:"date",name:"ad2",value:a.ad2,onChange:n,className:"w-full p-2 border rounded mt-1",required:!0})]}),e.jsxs("label",{className:"block mb-2",children:["Mode:",e.jsxs("select",{name:"mode",value:a.mode,onChange:n,className:"w-full p-2 border rounded mt-1",required:!0,children:[e.jsx("option",{value:"",children:"Select Mode"}),e.jsx("option",{value:"offline",children:"Offline"}),e.jsx("option",{value:"online",children:"Online"})]})]}),i&&e.jsx("p",{className:"text-red-500",children:i}),e.jsx("button",{type:"submit",className:"w-full mt-3 bg-blue-500 text-white p-2 rounded",children:"Fetch Bill"})]}),l&&e.jsxs("div",{className:"mt-5 p-4 bg-gray-100 rounded",children:[e.jsx("h3",{className:"font-bold",children:"Bill Details:"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Response Code:"})," ",l.response_code]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," ",l.status?"Success":"Failed"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Message:"})," ",l.message]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",l.name||((c=l.bill_fetch)==null?void 0:c.userName)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Bill Amount:"})," ",l.amount||((o=l.bill_fetch)==null?void 0:o.billAmount)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Net Bill Amount:"})," ",(d=l.bill_fetch)==null?void 0:d.billnetamount]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Due Date:"})," ",l.duedate||((h=l.bill_fetch)==null?void 0:h.dueDate)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Max Bill Amount:"})," ",(m=l.bill_fetch)==null?void 0:m.maxBillAmount]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Cell Number:"})," ",(u=l.bill_fetch)==null?void 0:u.cellNumber]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Accept Payment:"})," ",(p=l.bill_fetch)!=null&&p.acceptPayment?"Yes":"No"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Accept Partial Payment:"})," ",(x=l.bill_fetch)!=null&&x.acceptPartPay?"Yes":"No"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Additional Data 2 (ad2):"})," ",l.ad2||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Additional Data 3 (ad3):"})," ",l.ad3||"N/A"]})]})]})};export{B as default};
