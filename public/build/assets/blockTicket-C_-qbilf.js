import{r as m,j as r,a as I}from"./app-gHG3FWNm.js";import{A as N}from"./AdminLayout-ig8rvVGB.js";import"./x-Dij5_qHA.js";import"./createLucideIcon-Cehs4-sn.js";const S=()=>{const[e,d]=m.useState({availableTripId:"",boardingPointId:"",inventoryItems:{0:{seatName:"",fare:"",serviceTax:"",operatorServiceCharge:"",ladiesSeat:"false",passenger:{name:"",title:"Mr",mobile:"",email:"",age:"",gender:"MALE",address:"",idType:"",idNumber:"",primary:"1"}}}}),[p,u]=m.useState(""),[c,g]=m.useState(""),[v,b]=m.useState(!1),i=s=>{const{name:t,value:o}=s.target;d(a=>({...a,inventoryItems:{...a.inventoryItems,0:{...a.inventoryItems[0],[t]:o}}}))},n=s=>{const{name:t,value:o}=s.target;d(a=>({...a,inventoryItems:{...a.inventoryItems,0:{...a.inventoryItems[0],passenger:{...a.inventoryItems[0].passenger,[t]:o}}}}))},x=async s=>{var t,o,a,y;s.preventDefault(),u(""),g(""),b(!0);try{const l={availableTripId:Number(e.availableTripId),boardingPointId:Number(e.boardingPointId),inventoryItems:{0:{seatName:e.inventoryItems[0].seatName,fare:Number(e.inventoryItems[0].fare),serviceTax:Number(e.inventoryItems[0].serviceTax),operatorServiceCharge:Number(e.inventoryItems[0].operatorServiceCharge),ladiesSeat:e.inventoryItems[0].ladiesSeat,passenger:{name:e.inventoryItems[0].passenger.name,mobile:Number(e.inventoryItems[0].passenger.mobile),title:e.inventoryItems[0].passenger.title,email:e.inventoryItems[0].passenger.email,age:Number(e.inventoryItems[0].passenger.age),gender:e.inventoryItems[0].passenger.gender,address:e.inventoryItems[0].passenger.address,idType:e.inventoryItems[0].passenger.idType,idNumber:e.inventoryItems[0].passenger.idNumber,primary:e.inventoryItems[0].passenger.primary}}}},h=await I.post("/api/bus/block-ticket",l,{headers:{"Content-Type":"application/json",Accept:"application/json"}});h.data.status==="SUCCESS"?g("Ticket blocked successfully!"):u(h.data.message||"Failed to block ticket")}catch(l){console.error("Error while calling API:",l),u(((o=(t=l.response)==null?void 0:t.data)==null?void 0:o.message)||((y=(a=l.response)==null?void 0:a.data)==null?void 0:y.error)||"An error occurred while processing your request")}finally{b(!1)}};return r.jsx(N,{children:r.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[r.jsx("h1",{className:"text-xl font-bold mb-6",children:"Block Ticket Form"}),p&&r.jsx("div",{className:"mb-4 p-4 bg-red-100 text-red-700 rounded",children:p}),c&&r.jsx("div",{className:"mb-4 p-4 bg-green-100 text-green-700 rounded",children:c}),r.jsxs("form",{onSubmit:x,className:"grid grid-cols-2 gap-4",children:[r.jsx("label",{className:"col-span-2 font-semibold",children:"Available Trip Information"}),r.jsx("input",{type:"number",name:"availableTripId",placeholder:"Available Trip ID",value:e.availableTripId,onChange:s=>d({...e,availableTripId:s.target.value}),className:"p-2 border rounded",required:!0}),r.jsx("input",{type:"number",name:"boardingPointId",placeholder:"Boarding Point ID",value:e.boardingPointId,onChange:s=>d({...e,boardingPointId:s.target.value}),className:"p-2 border rounded",required:!0}),r.jsx("label",{className:"col-span-2 font-semibold mt-4",children:"Seat & Pricing Information"}),r.jsx("input",{type:"text",name:"seatName",placeholder:"Seat Name",value:e.inventoryItems[0].seatName,onChange:i,className:"p-2 border rounded",required:!0}),r.jsx("input",{type:"number",name:"fare",placeholder:"Fare",step:"0.01",value:e.inventoryItems[0].fare,onChange:i,className:"p-2 border rounded",required:!0}),r.jsx("input",{type:"number",name:"serviceTax",placeholder:"Service Tax",step:"0.01",value:e.inventoryItems[0].serviceTax,onChange:i,className:"p-2 border rounded",required:!0}),r.jsx("input",{type:"number",name:"operatorServiceCharge",placeholder:"Operator Service Charge",step:"0.01",value:e.inventoryItems[0].operatorServiceCharge,onChange:i,className:"p-2 border rounded",required:!0}),r.jsxs("select",{name:"ladiesSeat",value:e.inventoryItems[0].ladiesSeat,onChange:i,className:"p-2 border rounded",required:!0,children:[r.jsx("option",{value:"false",children:"No"}),r.jsx("option",{value:"true",children:"Yes"})]}),r.jsx("label",{className:"col-span-2 font-semibold mt-4",children:"Passenger Information"}),r.jsx("input",{type:"text",name:"name",placeholder:"Passenger Name",value:e.inventoryItems[0].passenger.name,onChange:n,className:"p-2 border rounded",required:!0}),r.jsxs("select",{name:"title",value:e.inventoryItems[0].passenger.title,onChange:n,className:"p-2 border rounded",required:!0,children:[r.jsx("option",{value:"Mr",children:"Mr"}),r.jsx("option",{value:"Ms",children:"Ms"}),r.jsx("option",{value:"Mrs",children:"Mrs"})]}),r.jsx("input",{type:"tel",name:"mobile",placeholder:"Mobile Number",value:e.inventoryItems[0].passenger.mobile,onChange:n,className:"p-2 border rounded",required:!0}),r.jsx("input",{type:"email",name:"email",placeholder:"Email Address",value:e.inventoryItems[0].passenger.email,onChange:n,className:"p-2 border rounded",required:!0}),r.jsx("input",{type:"number",name:"age",placeholder:"Age",value:e.inventoryItems[0].passenger.age,onChange:n,className:"p-2 border rounded",required:!0}),r.jsxs("select",{name:"gender",value:e.inventoryItems[0].passenger.gender,onChange:n,className:"p-2 border rounded",required:!0,children:[r.jsx("option",{value:"MALE",children:"Male"}),r.jsx("option",{value:"FEMALE",children:"Female"})]}),r.jsx("input",{type:"text",name:"address",placeholder:"Address",value:e.inventoryItems[0].passenger.address,onChange:n,className:"p-2 border rounded",required:!0}),r.jsx("input",{type:"text",name:"idType",placeholder:"ID Type (e.g., Aadhar, PAN)",value:e.inventoryItems[0].passenger.idType,onChange:n,className:"p-2 border rounded",required:!0}),r.jsx("input",{type:"text",name:"idNumber",placeholder:"ID Number",value:e.inventoryItems[0].passenger.idNumber,onChange:n,className:"p-2 border rounded",required:!0}),r.jsxs("select",{name:"primary",value:e.inventoryItems[0].passenger.primary,onChange:n,className:"p-2 border rounded",required:!0,children:[r.jsx("option",{value:"1",children:"Yes"}),r.jsx("option",{value:"0",children:"No"})]}),r.jsx("button",{type:"submit",className:"col-span-2 p-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed mt-4",disabled:v,children:v?"Processing...":"Block Ticket"})]})]})})};export{S as default};
