import{r as n,m as f,a as _,j as e}from"./app-C9Hasp1L.js";import{A as y}from"./AdminLayout-dj7iNOPP.js";import"./x-o7aJ_J0I.js";import"./createLucideIcon-BHfLX7CN.js";const S=({lpgData:d})=>{const[c,u]=n.useState([]),[h,m]=n.useState(!1),[s,p]=n.useState(null),{data:l,setData:t,post:b,processing:i}=f({operator:"",canumber:"",ad1:"",ad2:"",ad3:""});n.useEffect(()=>{j()},[]);const j=async()=>{m(!0);try{const a=await _.post("/api/fetch-lpg-operator",{mode:"offline"});console.log("API Response:",a.data),u(a.data.data||[])}catch(a){console.error("Error fetching operators:",a)}m(!1)},g=a=>{const r=a.target.value;t("operator",r);const x=c.find(o=>o.id===r);p(x),x&&t(o=>({...o,operator:r,ad1:"",ad2:"",ad3:""}))},N=a=>{a.preventDefault(),console.log("User Input Data:",l),b(route("LPG.FetchLPGDetails"),{onSuccess:r=>{console.log("API Response:",r.props.lpgData)},onError:r=>{console.error("Error Response:",r)}})};return e.jsxs(y,{children:[e.jsx("h1",{className:"text-xl font-bold mb-4",children:"Fetch LPG Bill Details"}),e.jsxs("form",{onSubmit:N,className:"bg-white p-4 shadow-md rounded",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block font-medium",children:"Operator:"}),h?e.jsx("p",{children:"Loading operators..."}):e.jsxs("select",{value:l.operator,onChange:g,className:"border p-2 rounded w-full",required:!0,children:[e.jsx("option",{value:"",children:"Select an operator"}),c.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block font-medium",children:"CA Number:"}),e.jsx("input",{type:"text",value:l.canumber,onChange:a=>t("canumber",a.target.value),className:"border p-2 rounded w-full",required:!0,placeholder:(s==null?void 0:s.displayname)||"Enter CA Number"}),(s==null?void 0:s.regex)&&e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Format: ",s.regex]})]}),(s==null?void 0:s.ad1_d_name)&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"block font-medium",children:[s.ad1_d_name,":"]}),e.jsx("input",{type:"text",value:l.ad1,onChange:a=>t("ad1",a.target.value),className:"border p-2 rounded w-full",required:!0,placeholder:`Enter ${s.ad1_d_name}`}),(s==null?void 0:s.ad1_regex)&&e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Format: ",s.ad1_regex]})]}),(s==null?void 0:s.ad2_d_name)&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"block font-medium",children:[s.ad2_d_name,":"]}),e.jsx("input",{type:"text",value:l.ad2,onChange:a=>t("ad2",a.target.value),className:"border p-2 rounded w-full",required:!!(s!=null&&s.ad2_d_name),placeholder:`Enter ${s.ad2_d_name}`}),(s==null?void 0:s.ad2_regex)&&e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Format: ",s.ad2_regex]})]}),(s==null?void 0:s.ad3_d_name)&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"block font-medium",children:[s.ad3_d_name,":"]}),e.jsx("input",{type:"text",value:l.ad3,onChange:a=>t("ad3",a.target.value),className:"border p-2 rounded w-full",required:!!(s!=null&&s.ad3_d_name),placeholder:`Enter ${s.ad3_d_name}`}),(s==null?void 0:s.ad3_regex)&&e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Format: ",s.ad3_regex]})]}),e.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",disabled:i,children:i?"Fetching...":"Fetch Details"})]}),d&&e.jsxs("div",{className:"bg-gray-100 p-4 mt-4 rounded shadow-md",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Bill Details"}),e.jsx("table",{className:"w-full border-collapse border border-gray-300",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"border px-4 py-2 font-semibold",children:"Response Code"}),e.jsx("td",{className:"border px-4 py-2",children:d.response_code})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border px-4 py-2 font-semibold",children:"Status"}),e.jsx("td",{className:"border px-4 py-2",children:d.status?"Success ✅":"Failed ❌"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border px-4 py-2 font-semibold",children:"Amount"}),e.jsxs("td",{className:"border px-4 py-2",children:["₹",d.amount]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border px-4 py-2 font-semibold",children:"Name"}),e.jsx("td",{className:"border px-4 py-2",children:d.name})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border px-4 py-2 font-semibold",children:"Message"}),e.jsx("td",{className:"border px-4 py-2",children:d.message})]})]})})]})]})};export{S as default};
