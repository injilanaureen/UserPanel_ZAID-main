import{r as i,j as e}from"./app-DKoc5bU4.js";import{A as F}from"./AdminLayout-B01A5rIe.js";import{T as v,a as S,b as o,c as r,d as C,e as t}from"./table-D9fi-ABp.js";import{C as A}from"./circle-alert-0luMAZ2E.js";import{C as k}from"./circle-check-big-DUsmVb4W.js";import{P as z}from"./phone-iCjbhAy8.js";import{K as P}from"./key-Cmsjq0hk.js";import{F as p}from"./file-text-DxbaFpiw.js";import{C as E}from"./code-BMME1ElT.js";import"./x-CLVtGspL.js";import"./createLucideIcon-D8pcIGZt.js";import"./utils-CiMRq3MP.js";import"./clsx-B-dksMZM.js";const Y=({recentRegistrations:u=[]})=>{const[a,T]=i.useState({mobile:"",otp:"",stateresp:"",data:"",accessmode:"SITE",is_iris:2}),[g,h]=i.useState(!1),[D,L]=i.useState(!1),[f,b]=i.useState(null),[y,c]=i.useState(null),[j,d]=i.useState(""),[m,N]=i.useState("form"),n=s=>{T({...a,[s.target.name]:s.target.value}),c(null),d("")},R=async s=>{var l;s.preventDefault(),h(!0),c(null),d(""),b(null);try{const x=await fetch("/api/admin/remitter2/register-remitter",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(l=document.querySelector('meta[name="csrf-token"]'))==null?void 0:l.getAttribute("content")},body:JSON.stringify(a)}),w=await x.json();x.ok?(b(w.data),d("Remitter registered successfully!")):c(w.error||"Failed to register remitter")}catch{c("Failed to communicate with the server. Please try again.")}finally{h(!1)}};return e.jsx(F,{children:e.jsxs("div",{className:"max-w-full",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex space-x-4 border-b",children:[e.jsx("button",{onClick:()=>N("form"),className:`py-2 px-4 font-medium ${m==="form"?"border-b-2 border-gray-800 text-gray-800":"text-gray-500 hover:text-gray-700"}`,children:"Registration Form"}),e.jsx("button",{onClick:()=>N("history"),className:`py-2 px-4 font-medium ${m==="history"?"border-b-2 border-gray-800 text-gray-800":"text-gray-500 hover:text-gray-700"}`,children:"Registration History"})]})}),m==="form"?e.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-100",children:[e.jsx("div",{className:"bg-gradient-to-tr from-gray-400 to-black py-4 px-6",children:e.jsx("h2",{className:"text-3xl font-semibold text-white",children:"Register Remitter"})}),e.jsxs("form",{onSubmit:R,className:"p-6",children:[y&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-100 rounded-lg",children:e.jsxs("p",{className:"text-red-600 text-sm flex items-center",children:[e.jsx(A,{size:16,className:"mr-2"}),y]})}),j&&e.jsx("div",{className:"mb-6 p-4 bg-green-50 border border-green-100 rounded-lg",children:e.jsxs("p",{className:"text-green-600 text-sm flex items-center",children:[e.jsx(k,{size:16,className:"mr-2"}),j]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{htmlFor:"mobile",className:"flex items-center text-sm font-medium text-gray-600 mb-1",children:[e.jsx(z,{size:20,className:"mr-2 text-blue-500"}),"Mobile Number"]}),e.jsx("div",{className:"flex",children:e.jsx("input",{type:"text",id:"mobile",name:"mobile",pattern:"[0-9]{10}",maxLength:"10",value:a.mobile,onChange:n,className:"flex-grow px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all",required:!0,placeholder:"Enter 10 digit mobile number"})})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"otp",className:"flex items-center text-sm font-medium text-gray-600 mb-1",children:[e.jsx(P,{size:20,className:"mr-2 text-yellow-500"}),"OTP"]}),e.jsx("input",{type:"text",id:"otp",name:"otp",pattern:"[0-9]{6}",maxLength:"6",value:a.otp,onChange:n,className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all",required:!0,placeholder:"Enter 6 digit OTP recieved while verifying Aadhar"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"stateresp",className:"flex items-center text-sm font-medium text-gray-600 mb-1",children:[e.jsx(p,{size:20,className:"mr-2 text-green-500"}),"State Response"]}),e.jsx("input",{type:"text",id:"stateresp",name:"stateresp",value:a.stateresp,onChange:n,className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all",required:!0,placeholder:"Enter state response"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"data",className:"flex items-center text-sm font-medium text-gray-600 mb-1",children:[e.jsx(p,{size:20,className:"mr-2 text-purple-500"}),"Data(Pid)"]}),e.jsx("input",{type:"text",id:"data",name:"data",value:a.data,onChange:n,className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all",required:!0,placeholder:"Enter data"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"is_iris",className:"flex items-center text-sm font-medium text-gray-600 mb-1",children:[e.jsx(p,{size:20,className:"mr-2 text-orange-500"}),"Is Iris"]}),e.jsxs("select",{id:"is_iris",name:"is_iris",value:a.is_iris,onChange:n,className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:2,children:"No"}),e.jsx("option",{value:1,children:"Yes"})]})]})]}),e.jsx("button",{type:"submit",disabled:g,className:"w-full bg-gray-800 text-white py-3 px-4 rounded-lg hover:bg-black focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:g?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Register Remitter"})]}),f&&e.jsx("div",{className:"px-6 pb-6",children:e.jsxs("div",{className:"mt-4",children:[e.jsxs("h3",{className:"font-medium text-sm text-gray-700 mb-2 flex items-center",children:[e.jsx(E,{size:16,className:"mr-2"}),"API Response:"]}),e.jsx("div",{className:"border border-gray-200 rounded-lg shadow-md overflow-hidden",children:e.jsxs(v,{className:"w-full border-collapse",children:[e.jsx(S,{className:"bg-sky-500 text-white",children:e.jsxs(o,{children:[e.jsx(r,{className:"px-4 py-2 text-left",children:"Key"}),e.jsx(r,{className:"px-4 py-2 text-left",children:"Value"})]})}),e.jsx(C,{children:Object.entries(f).map(([s,l])=>e.jsxs(o,{className:"border-b border-gray-200",children:[e.jsx(t,{className:"px-4 py-2 font-medium",children:s}),e.jsx(t,{className:"px-4 py-2",children:String(l)})]},s))})]})})]})})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-100",children:[e.jsx("div",{className:"bg-gradient-to-tr from-gray-400 to-black py-4 px-6",children:e.jsx("h2",{className:"text-3xl font-semibold text-white",children:"Registration History"})}),e.jsx("div",{className:"p-6 overflow-x-auto",children:e.jsxs(v,{className:"w-full",children:[e.jsx(S,{className:"bg-gray-50",children:e.jsxs(o,{children:[e.jsx(r,{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx(r,{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Mobile"}),e.jsx(r,{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx(r,{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Message"}),e.jsx(r,{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Access Mode"}),e.jsx(r,{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Limit"})]})}),e.jsx(C,{children:u.length===0?e.jsx(o,{children:e.jsx(t,{colSpan:6,className:"px-4 py-8 text-center text-gray-500",children:"No registration data available"})}):u.map((s,l)=>e.jsxs(o,{className:l%2===0?"bg-white":"bg-gray-50",children:[e.jsx(t,{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:new Date(s.created_at).toLocaleString()}),e.jsx(t,{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:s.mobile}),e.jsx(t,{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${s.status==="success"?"bg-green-100 text-green-800":s.status==="error"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:s.status||"Pending"})}),e.jsx(t,{className:"px-4 py-3 text-sm text-gray-500",children:s.message}),e.jsx(t,{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:s.accessmode}),e.jsx(t,{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:s.limit?`â‚¹${s.limit.toLocaleString()}`:"N/A"})]},s.id||l))})]})})]})]})})};export{Y as default};
