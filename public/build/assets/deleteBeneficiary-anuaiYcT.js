import{r as a,m as S,a as _,j as e,S as H}from"./app-CZv1nOOH.js";import{A as T}from"./AdminLayout-CTmx2qXI.js";import{T as z,a as B,b as u,c as l,d as M,e as i}from"./table-UF_yoU1h.js";import{P as A}from"./phone-ChIs3DW4.js";import{c as g}from"./createLucideIcon-B-9tdfDT.js";import{C as j}from"./circle-alert-BpKZ3PlI.js";import{C as E}from"./circle-check-big-VwmCz458.js";import"./x-LiQ53BPv.js";import"./log-out-CxlWhsci.js";import"./utils-CiMRq3MP.js";import"./clsx-B-dksMZM.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],F=g("Trash2",$);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],L=g("UserX",I),P=({type:r,message:s})=>e.jsx("div",{className:`p-4 rounded-lg ${r==="success"?"bg-green-50 border border-green-100 text-green-600":"bg-red-50 border border-red-100 text-red-600"}`,children:e.jsxs("p",{className:"text-sm flex items-center",children:[r==="success"?e.jsx(E,{size:16,className:"mr-2"}):e.jsx(j,{size:16,className:"mr-2"}),s]})}),R=({data:r})=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-4",children:"Deletion History"}),r.length===0?e.jsx("p",{className:"text-gray-500 text-sm",children:"No deletion history available."}):e.jsx("div",{className:"border border-gray-200 rounded-lg shadow-md overflow-hidden",children:e.jsxs(z,{className:"w-full border-collapse",children:[e.jsx(B,{className:"bg-sky-500 text-white",children:e.jsxs(u,{children:[e.jsx(l,{className:"px-4 py-2 text-left",children:"Mobile"}),e.jsx(l,{className:"px-4 py-2 text-left",children:"Bene ID"}),e.jsx(l,{className:"px-4 py-2 text-left",children:"Status"}),e.jsx(l,{className:"px-4 py-2 text-left",children:"Response Code"}),e.jsx(l,{className:"px-4 py-2 text-left",children:"Message"}),e.jsx(l,{className:"px-4 py-2 text-left",children:"Date"})]})}),e.jsx(M,{children:r.map((s,c)=>e.jsxs(u,{className:"border-b border-gray-200",children:[e.jsx(i,{className:"px-4 py-2",children:s.mobile}),e.jsx(i,{className:"px-4 py-2",children:s.bene_id}),e.jsx(i,{className:"px-4 py-2",children:e.jsx("span",{className:`text-sm ${s.status?"text-green-600":"text-red-600"}`,children:s.status?"Success":"Failed"})}),e.jsx(i,{className:"px-4 py-2",children:s.response_code}),e.jsx(i,{className:"px-4 py-2",children:s.message}),e.jsx(i,{className:"px-4 py-2",children:new Date(s.created_at).toLocaleString()})]},c))})]})})]}),Z=()=>{const[r,s]=a.useState("delete"),[c,o]=a.useState(!1),[x,m]=a.useState(null),[N,y]=a.useState(!1),[v,w]=a.useState([]),{data:d,setData:h,processing:p}=S({mobile:"",bene_id:""});a.useEffect(()=>{b()},[]);const b=async()=>{try{const t=await _.get(route("beneficiary2.getDeletionHistory"));w(t.data)}catch(t){console.error("Error fetching deletion history:",t)}},f=t=>{const{name:n,value:D}=t.target;h(n,D)},C=t=>{t.preventDefault(),o(!0)},k=()=>{H.post(route("beneficiary2.destroyBeneficiary"),d,{preserveScroll:!0,onSuccess:t=>{var n;(n=t==null?void 0:t.props)!=null&&n.flash&&(m(t.props.flash.message),y(t.props.flash.status),o(!1),h({mobile:"",bene_id:""}),b(),s("history"))},onError:()=>{m("Failed to delete beneficiary"),y(!1),o(!1)}})};return e.jsx(T,{children:e.jsx("div",{className:"max-w-full p-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-100",children:[e.jsx("div",{className:"bg-gradient-to-tr from-gray-400 to-black py-4 px-6",children:e.jsx("h2",{className:"text-3xl font-semibold text-white",children:"Delete Beneficiary"})}),e.jsxs("div",{className:"flex border-b border-gray-200 px-6 pt-4",children:[e.jsx("button",{className:`py-2 px-4 text-sm font-medium ${r==="delete"?"border-b-2 border-gray-800 text-gray-800":"text-gray-500 hover:text-gray-700"}`,onClick:()=>s("delete"),children:"Delete Beneficiary"}),e.jsx("button",{className:`py-2 px-4 text-sm font-medium ${r==="history"?"border-b-2 border-gray-800 text-gray-800":"text-gray-500 hover:text-gray-700"}`,onClick:()=>s("history"),children:"Deletion History"})]}),e.jsxs("div",{className:"p-6",children:[r==="delete"&&e.jsxs("div",{children:[x&&e.jsx(P,{type:N?"success":"error",message:x}),e.jsxs("form",{onSubmit:C,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"mobile",className:"flex items-center text-sm font-medium text-gray-600 mb-1",children:[e.jsx(A,{size:20,className:"mr-2 text-yellow-500"}),"Mobile Number"]}),e.jsx("input",{id:"mobile",type:"text",name:"mobile",value:d.mobile,onChange:f,className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all",placeholder:"Enter 10-digit mobile number"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"bene_id",className:"flex items-center text-sm font-medium text-gray-600 mb-1",children:[e.jsx(L,{size:20,className:"mr-2 text-red-500"}),"Beneficiary ID"]}),e.jsx("input",{id:"bene_id",type:"text",name:"bene_id",value:d.bene_id,onChange:f,className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all",placeholder:"Enter beneficiary ID"})]}),e.jsx("button",{type:"submit",disabled:p,className:"w-full bg-red-600 text-white py-3 px-4 rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:p?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx(F,{size:20,className:"mr-2"}),"Delete Beneficiary"]})})]})]}),r==="history"&&e.jsx(R,{data:v})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-lg max-w-md w-full",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-800 mb-4 flex items-center",children:[e.jsx(j,{size:20,className:"mr-2 text-red-500"}),"Confirm Deletion"]}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this beneficiary? This action cannot be undone."}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 rounded-lg border border-gray-200 hover:bg-gray-50 transition",children:"Cancel"}),e.jsx("button",{onClick:k,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 transition",children:"Confirm Delete"})]})]})})]})})})};export{Z as default};
