import{r,K as k,j as e,U as D,a as L}from"./app-C6KbmfFr.js";import{A as R,C as z}from"./AdminLayout-DbH3QWWo.js";import{T as O,a as T,b as p,c as t,d as E,e as n}from"./table-XKXuQS5F.js";import{S as B}from"./signal-7tdI4ohJ.js";import{S as F}from"./search-B9UsqIqZ.js";import{c as I}from"./createLucideIcon-CNN_eIL7.js";import{C as M}from"./circle-alert-CBFkq65h.js";import{C as H}from"./circle-check-big-D_VRVCW-.js";import{C as V}from"./chevron-up-DFPZlz1f.js";import"./x-BRrquwPd.js";import"./log-out-Bd9QQEst.js";import"./utils-CiMRq3MP.js";import"./clsx-B-dksMZM.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],K=I("RefreshCw",q),ce=()=>{const[N,v]=r.useState([]),[d,m]=r.useState([]),[i,j]=r.useState(!1),[o,x]=r.useState(null),[f,g]=r.useState(""),[h,C]=r.useState({}),[u,A]=r.useState(""),{props:Q}=k(),y=s=>{C(a=>({...a,[s]:!a[s]}))},S=()=>{const s=document.querySelector('meta[name="csrf-token"]');return s?s.content:""},b=async()=>{var s,a;j(!0),x(null),g("");try{const c=await L.get("/api/operators",{headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":S()}});if(console.log("Response Data:",c.data),c.data.success){const l=c.data.operators||[],w=Array.isArray(l)?l:[];v(w),m(w),g("Operators loaded successfully!")}else x(c.data.message||"Failed to fetch operators")}catch(c){console.error("Fetch Error:",c);const l=((a=(s=c.response)==null?void 0:s.data)==null?void 0:a.message)||"An error occurred while fetching operators";x(typeof l=="object"?JSON.stringify(l):l)}finally{j(!1)}},_=s=>{const a=s.target.value.toLowerCase();if(A(a),a.trim()==="")m(N);else{const c=N.filter(l=>l.id&&l.id.toString().includes(a)||l.name&&l.name.toLowerCase().includes(a)||l.category&&l.category.toLowerCase().includes(a)||l.displayname&&l.displayname.toLowerCase().includes(a)||l.regex&&l.regex.toLowerCase().includes(a)||l.ad1_name&&l.ad1_name.toLowerCase().includes(a)||l.ad2_name&&l.ad2_name.toLowerCase().includes(a)||l.ad3_name&&l.ad3_name.toLowerCase().includes(a));m(c)}};return r.useEffect(()=>{b()},[]),e.jsx(R,{children:e.jsx("div",{className:"max-w-full",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-100",children:[e.jsx("div",{className:"bg-gradient-to-tr from-gray-400 to-black py-4 px-6",children:e.jsx("h2",{className:"text-3xl font-semibold text-white",children:"Operator List"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-4 flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(B,{size:20,className:"mr-2 text-green-500"}),e.jsx("span",{className:"text-lg font-medium",children:"Available Operators"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(F,{size:16,className:"text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Search operators...",value:u,onChange:_,className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 w-full sm:w-64"})]}),e.jsx("button",{onClick:b,disabled:i,className:"bg-gray-800 text-white py-2 px-4 rounded-lg hover:bg-black focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium flex items-center justify-center",children:i?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Refreshing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(K,{size:16,className:"mr-2"}),"Refresh Operators"]})})]})]}),o&&e.jsx("div",{className:"mt-4 p-4 bg-red-50 border border-red-100 rounded-lg",children:e.jsxs("p",{className:"text-red-600 text-sm flex items-center",children:[e.jsx(M,{size:16,className:"mr-2"}),o]})}),f&&e.jsx("div",{className:"mt-4 p-4 bg-green-50 border border-green-100 rounded-lg",children:e.jsxs("p",{className:"text-green-600 text-sm flex items-center",children:[e.jsx(H,{size:16,className:"mr-2"}),f]})}),i&&e.jsx("div",{className:"flex justify-center items-center p-8",children:e.jsxs("svg",{className:"animate-spin h-8 w-8 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),!i&&d.length>0&&e.jsx("div",{className:"border border-gray-200 rounded-lg shadow-md overflow-hidden mt-4",children:e.jsxs(O,{className:"w-full border-collapse",children:[e.jsx(T,{className:"bg-sky-500 text-white",children:e.jsxs(p,{children:[e.jsx(t,{className:"px-4 py-2 text-left"}),e.jsx(t,{className:"px-4 py-2 text-left",children:"ID"}),e.jsx(t,{className:"px-4 py-2 text-left",children:"Name"}),e.jsx(t,{className:"px-4 py-2 text-left",children:"Category"}),e.jsx(t,{className:"px-4 py-2 text-left",children:"View Bill"}),e.jsx(t,{className:"px-4 py-2 text-left",children:"Display Name"}),e.jsx(t,{className:"px-4 py-2 text-left",children:"Details"})]})}),e.jsx(E,{children:d.map((s,a)=>e.jsxs(D.Fragment,{children:[e.jsxs(p,{className:"border-b border-gray-200 hover:bg-gray-50",children:[e.jsx(n,{className:"px-4 py-2",children:e.jsx("button",{onClick:()=>y(s.id||a),className:"text-gray-500 hover:text-gray-800",children:h[s.id||a]?e.jsx(V,{size:16}):e.jsx(z,{size:16})})}),e.jsx(n,{className:"px-4 py-2",children:s.id||"N/A"}),e.jsx(n,{className:"px-4 py-2 font-medium",children:s.name||"N/A"}),e.jsx(n,{className:"px-4 py-2",children:s.category||"N/A"}),e.jsx(n,{className:"px-4 py-2",children:s.viewbill==="1"?"Yes":"No"}),e.jsx(n,{className:"px-4 py-2",children:s.displayname||"N/A"}),e.jsx(n,{className:"px-4 py-2",children:e.jsx("button",{onClick:()=>y(s.id||a),className:"text-blue-500 hover:text-blue-700 underline text-sm",children:h[s.id||a]?"Hide Details":"View Details"})})]}),h[s.id||a]&&e.jsx(p,{className:"bg-gray-50",children:e.jsx(n,{colSpan:7,className:"px-6 py-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-gray-700",children:"Basic Information"}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"ID:"})," ",s.id||"N/A"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Name:"})," ",s.name||"N/A"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Category:"})," ",s.category||"N/A"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"View Bill:"})," ",s.viewbill==="1"?"Yes":"No"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Display Name:"})," ",s.displayname||"N/A"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Regex:"})," ",s.regex||"N/A"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-gray-700",children:"AD1 Information"}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Display Name:"})," ",s.ad1_d_name||"N/A"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Name:"})," ",s.ad1_name||"N/A"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Regex:"})," ",s.ad1_regex||"N/A"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-gray-700",children:"AD2 Information"}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Display Name:"})," ",s.ad2_d_name||"N/A"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Name:"})," ",s.ad2_name||"N/A"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Regex:"})," ",s.ad2_regex||"N/A"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-gray-700",children:"AD3 Information"}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Display Name:"})," ",s.ad3_d_name||"N/A"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Name:"})," ",s.ad3_name||"N/A"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Regex:"})," ",s.ad3_regex||"N/A"]})]})]})})})]},s.id||a))})]})}),!i&&!o&&d.length===0&&e.jsx("div",{className:"text-center text-gray-500 p-8 bg-gray-50 rounded-lg border border-gray-200 mt-4",children:u?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-lg mb-2",children:"No operators match your search"}),e.jsx("p",{className:"text-sm",children:"Try changing your search terms or clearing the search"})]}):e.jsx("p",{children:"No operators found"})})]})]})})})};export{ce as default};
