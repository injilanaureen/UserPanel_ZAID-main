import{r as n,j as e,a as N}from"./app-CCaHcxlW.js";import{A as b}from"./AdminLayout-Bl1EIZ6y.js";import{T as g,a as w,b as r,c as u,d as v,e as s}from"./table-DjSdKAOu.js";import{C}from"./code-CuTvdcvE.js";import{C as S}from"./circle-alert-C8jz7lCm.js";import{C as I}from"./circle-check-big-Da_qu0HH.js";import"./x-DomxVi1l.js";import"./createLucideIcon-Blvautya.js";import"./utils-CiMRq3MP.js";import"./clsx-B-dksMZM.js";const B=()=>{const[c,f]=n.useState(""),[a,i]=n.useState(null),[o,m]=n.useState(!1),[x,d]=n.useState(""),j=async()=>{var t,p,h;m(!0),d(""),i(null);try{const l=await N.post("/lpg-status",{referenceid:c},{headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":(t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content")}});l.data?i(l.data):d("Invalid response received from server")}catch(l){console.error("API Error:",l),d(((h=(p=l.response)==null?void 0:p.data)==null?void 0:h.message)||"Failed to fetch status. Please try again.")}finally{m(!1)}},y=t=>{if(t.preventDefault(),!c.trim()){d("Please enter a Reference ID");return}j()};return e.jsx(b,{children:e.jsx("div",{className:"max-w-full",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-100",children:[e.jsx("div",{className:"bg-gradient-to-tr from-gray-400 to-black py-4 px-6",children:e.jsx("h2",{className:"text-3xl font-semibold text-white",children:"LPG Status Check"})}),e.jsxs("form",{onSubmit:y,className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{htmlFor:"referenceId",className:"flex items-center text-sm font-medium text-gray-600 mb-1",children:[e.jsx(C,{size:20,className:"mr-2 text-blue-500"}),"Reference ID"]}),e.jsx("input",{id:"referenceId",type:"text",value:c,onChange:t=>f(t.target.value),placeholder:"Enter Reference ID",className:"w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all",required:!0})]}),e.jsx("button",{type:"submit",disabled:o,className:"w-full bg-gray-800 text-white py-3 px-4 rounded-lg hover:bg-black focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:o?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Checking..."]}):"Check Status"})]}),e.jsxs("div",{className:"px-6 pb-6",children:[x&&e.jsx("div",{className:"mt-4 p-4 bg-red-50 border border-red-100 rounded-lg",children:e.jsxs("p",{className:"text-red-600 text-sm flex items-center",children:[e.jsx(S,{size:16,className:"mr-2"}),x]})}),a&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("h3",{className:"font-medium text-sm text-gray-700 mb-2 flex items-center",children:[e.jsx(I,{size:16,className:"mr-2"}),"Transaction Details"]}),e.jsx("p",{className:`mb-4 text-sm ${a.status?"text-green-600":"text-red-600"}`,children:a.message}),a.data&&e.jsx("div",{className:"border border-gray-200 rounded-lg shadow-md overflow-hidden",children:e.jsxs(g,{className:"w-full border-collapse",children:[e.jsx(w,{className:"bg-sky-500 text-white",children:e.jsxs(r,{children:[e.jsx(u,{className:"px-4 py-2 text-left",children:"Field"}),e.jsx(u,{className:"px-4 py-2 text-left",children:"Value"})]})}),e.jsxs(v,{children:[e.jsxs(r,{children:[e.jsx(s,{className:"px-4 py-2 font-medium",children:"Transaction ID"}),e.jsx(s,{className:"px-4 py-2",children:a.data.txnid})]}),e.jsxs(r,{children:[e.jsx(s,{className:"px-4 py-2 font-medium",children:"Operator Name"}),e.jsx(s,{className:"px-4 py-2",children:a.data.operatorname})]}),e.jsxs(r,{children:[e.jsx(s,{className:"px-4 py-2 font-medium",children:"Customer Number"}),e.jsx(s,{className:"px-4 py-2",children:a.data.canumber})]}),e.jsxs(r,{children:[e.jsx(s,{className:"px-4 py-2 font-medium",children:"Amount"}),e.jsxs(s,{className:"px-4 py-2",children:["₹",a.data.amount]})]}),e.jsxs(r,{children:[e.jsx(s,{className:"px-4 py-2 font-medium",children:"TDS"}),e.jsxs(s,{className:"px-4 py-2",children:["₹",a.data.tds]})]}),e.jsxs(r,{children:[e.jsx(s,{className:"px-4 py-2 font-medium",children:"Reference ID"}),e.jsx(s,{className:"px-4 py-2",children:a.data.refid})]}),e.jsxs(r,{children:[e.jsx(s,{className:"px-4 py-2 font-medium",children:"Operator ID"}),e.jsx(s,{className:"px-4 py-2",children:a.data.operatorid})]}),e.jsxs(r,{children:[e.jsx(s,{className:"px-4 py-2 font-medium",children:"Date Added"}),e.jsx(s,{className:"px-4 py-2",children:a.data.dateadded})]}),e.jsxs(r,{children:[e.jsx(s,{className:"px-4 py-2 font-medium",children:"Refunded"}),e.jsx(s,{className:"px-4 py-2",children:a.data.refunded==="0"?"No":"Yes"})]}),a.data.daterefunded&&e.jsxs(r,{children:[e.jsx(s,{className:"px-4 py-2 font-medium",children:"Date Refunded"}),e.jsx(s,{className:"px-4 py-2",children:a.data.daterefunded})]})]})]})})]})]})]})})})};export{B as default};
