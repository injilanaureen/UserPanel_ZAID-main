import{r as i,j as e}from"./app-DJa97arl.js";import{A as T}from"./AdminLayout-BAUsXvD1.js";import{L as P}from"./loader-circle-BXh6kfSb.js";import{S as A}from"./search-BZMMNtJZ.js";import"./x-BxSEnrvq.js";import"./createLucideIcon-0J5g5tHA.js";import"./log-out-CuD3j2sV.js";const B=()=>{const[w,b]=i.useState([]),[y,N]=i.useState(!0),[g,S]=i.useState(null),[n,v]=i.useState(""),[x,C]=i.useState("all"),[a,m]=i.useState(1),[p]=i.useState(10),[k,L]=i.useState([]);i.useEffect(()=>{(async()=>{try{const r=await fetch("/admin/busTicket/fetchSourceCities",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}});if(!r.ok)throw new Error("Network response was not ok");const s=await r.json();if(s.status&&s.data.cities){b(s.data.cities);const o=[...new Set(s.data.cities.map(d=>d.state))];L(o)}else throw new Error("Failed to fetch cities data")}catch(r){S(r.message)}finally{N(!1)}})()},[]);const l=w.filter(t=>{var o,d,j;const r=((o=t.name)==null?void 0:o.toLowerCase().includes(n.toLowerCase()))||!1||((d=t.state)==null?void 0:d.toLowerCase().includes(n.toLowerCase()))||!1||((j=t.id)==null?void 0:j.toString().includes(n))||!1,s=x==="all"||t.state===x;return r&&s}),u=a*p,f=u-p,E=l.slice(f,u),c=Math.ceil(l.length/p),h=t=>{m(t)};return y?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(P,{className:"h-8 w-8 animate-spin"})}):g?e.jsxs("div",{className:"text-red-500 p-4",children:["Error: ",g]}):e.jsx(T,{children:e.jsxs("div",{className:"",children:[e.jsx("div",{className:"bg-gradient-to-tr from-gray-400 to-black py-4 px-6",children:e.jsx("h2",{className:"text-3xl font-semibold text-white",children:"Available Bus Source Cities"})}),e.jsxs("div",{className:"mb-6 mt-6 flex gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(A,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search cities, states, or IDs...",className:"pl-10 pr-4 py-2 w-full border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:n,onChange:t=>{v(t.target.value),m(1)}})]}),e.jsxs("select",{className:"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:x,onChange:t=>{C(t.target.value),m(1)},children:[e.jsx("option",{value:"all",children:"All States"}),k.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{className:"mb-4 text-sm text-gray-600",children:["Showing ",f+1,"-",Math.min(u,l.length)," of ",l.length," cities"]}),e.jsx("div",{className:"overflow-x-auto rounded-lg border border-gray-200",children:e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"City"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"State"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Coordinates"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map((t,r)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.id}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.state}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.locationType}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.latitude,", ",t.longitude]})]},t.id||r))})]})}),c>1&&e.jsxs("div",{className:"flex items-center justify-between mt-4 px-4",children:[e.jsx("button",{onClick:()=>h(a-1),disabled:a===1,className:"px-3 py-1 border rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("div",{className:"flex gap-2",children:[...Array(c)].map((t,r)=>{const s=r+1;return s===1||s===c||s>=a-2&&s<=a+2?e.jsx("button",{onClick:()=>h(s),className:`px-3 py-1 border rounded-md ${a===s?"bg-blue-500 text-white":"hover:bg-gray-100"}`,children:s},s):s===a-3||s===a+3?e.jsx("span",{children:"..."},s):null})}),e.jsx("button",{onClick:()=>h(a+1),disabled:a===c,className:"px-3 py-1 border rounded-md hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})})};export{B as default};
