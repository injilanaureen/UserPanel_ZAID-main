import{K as C,r as d,j as e,S as F}from"./app-DMvSxdSr.js";import{A as E}from"./AdminLayout-CZdNJQUq.js";import{C as v}from"./credit-card-BgCp_QBx.js";import{B as _}from"./banknote-D4WvfhWN.js";import{F as z}from"./file-text-cYLs5VeC.js";import{C as q}from"./calendar-Dff2Erja.js";import{c as A}from"./createLucideIcon-DU2LoeeI.js";import{C as B}from"./circle-alert-Drcw10cE.js";import{C as P}from"./circle-check-big-CNqkqUoK.js";import"./x-X3WPSQvq.js";import"./log-out-DTFVTVf_.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],$=A("Image",R),X=()=>{const{bankAccounts:I,errors:w}=C().props,m=d.useRef(null),[r,u]=d.useState({transactionType:"",amount:"",transactionId:"",depositedDate:"",bankId:"",image_path:null}),[y,p]=d.useState(!1),[x,g]=d.useState(""),[f,b]=d.useState(""),[j,c]=d.useState({}),T=[{label:"NEFT",value:"NEFT"},{label:"RTGS",value:"RTGS"},{label:"IMPS",value:"IMPS"}],N=t=>{const s={};if(!t)return s;const l=["image/jpeg","image/png","image/jpg"],o=5*1024*1024;return l.includes(t.type)||(s.image_path="Only JPEG, JPG, and PNG images are allowed"),t.size>o&&(s.image_path="Image size should not exceed 5MB"),s},i=t=>{const{name:s,value:l,files:o}=t.target;if(s==="image_path"){const n=o[0],S=N(n);u(h=>({...h,image_path:n})),c(h=>({...h,...S}))}else u(n=>({...n,[s]:l}));(j[s]||x||f)&&(c(n=>({...n,[s]:null})),g(""),b(""))},k=()=>{const t={};if(r.transactionType||(t.transactionType="Transaction Type is required"),r.amount?parseFloat(r.amount)<=0&&(t.amount="Amount must be greater than zero"):t.amount="Amount is required",r.transactionId||(t.transactionId="Transaction ID is required"),r.depositedDate||(t.depositedDate="Deposited Date is required"),r.bankId||(t.bankId="Bank selection is required"),r.image_path){const s=N(r.image_path);s.image_path&&(t.image=s.image_path)}return t},D=t=>{t.preventDefault(),p(!0),g(""),b("");const s=k();if(Object.keys(s).length>0){c(s),p(!1);return}const l=new FormData;Object.entries(r).forEach(([o,n])=>{n!==null&&n!==""&&l.append(o,n)}),F.post("/fundrequest/store",l,{forceFormData:!0,preserveState:!0,preserveScroll:!0,onSuccess:()=>{b("Fund request submitted successfully!"),u({transactionType:"",amount:"",transactionId:"",depositedDate:"",bankId:"",image:null}),c({}),m.current&&(m.current.value=null)},onError:o=>{g("Failed to submit fund request"),c(o)},onFinish:()=>{p(!1)}})},a={...j,...w};return e.jsx(E,{children:e.jsx("div",{className:"max-w-full",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-100",children:[e.jsx("div",{className:"bg-gradient-to-tr from-gray-400 to-black py-4 px-6",children:e.jsx("h2",{className:"text-3xl font-semibold text-white",children:"Fund Request"})}),e.jsxs("form",{onSubmit:D,className:"p-6",encType:"multipart/form-data",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"transactionType",className:"flex items-center text-sm font-medium text-gray-600 mb-1",children:[e.jsx(v,{size:20,className:"mr-2 text-green-500"}),"Transaction Type"]}),e.jsxs("select",{id:"transactionType",name:"transactionType",value:r.transactionType,onChange:i,className:`w-full px-4 py-2 bg-gray-50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all ${a.transactionType?"border-red-500":"border-gray-200"}`,children:[e.jsx("option",{value:"",children:"Select Type"}),T.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))]}),a.transactionType&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.transactionType})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"amount",className:"flex items-center text-sm font-medium text-gray-600 mb-1",children:[e.jsx(_,{size:20,className:"mr-2 text-blue-500"}),"Amount"]}),e.jsx("input",{id:"amount",name:"amount",type:"number",value:r.amount,onChange:i,className:`w-full px-4 py-2 bg-gray-50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all ${a.amount?"border-red-500":"border-gray-200"}`,placeholder:"Enter Amount",min:"1",step:"0.01"}),a.amount&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.amount})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"transactionId",className:"flex items-center text-sm font-medium text-gray-600 mb-1",children:[e.jsx(z,{size:20,className:"mr-2 text-yellow-500"}),"Transaction ID"]}),e.jsx("input",{id:"transactionId",name:"transactionId",type:"text",value:r.transactionId,onChange:i,className:`w-full px-4 py-2 bg-gray-50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all ${a.transactionId?"border-red-500":"border-gray-200"}`,placeholder:"Enter Transaction ID"}),a.transactionId&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.transactionId})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"depositedDate",className:"flex items-center text-sm font-medium text-gray-600 mb-1",children:[e.jsx(q,{size:20,className:"mr-2 text-purple-500"}),"Deposited Date"]}),e.jsx("input",{id:"depositedDate",name:"depositedDate",type:"date",value:r.depositedDate,onChange:i,className:`w-full px-4 py-2 bg-gray-50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all ${a.depositedDate?"border-red-500":"border-gray-200"}`,max:new Date().toISOString().split("T")[0]}),a.depositedDate&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.depositedDate})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"bankId",className:"flex items-center text-sm font-medium text-gray-600 mb-1",children:[e.jsx(v,{size:20,className:"mr-2 text-indigo-500"}),"Bank Account"]}),e.jsxs("select",{id:"bankId",name:"bankId",value:r.bankId,onChange:i,className:`w-full px-4 py-2 bg-gray-50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all ${a.bankId?"border-red-500":"border-gray-200"}`,children:[e.jsx("option",{value:"",children:"Select Bank Account"}),I.map(t=>e.jsxs("option",{value:t.id,children:[t.bank," - ",t.account_name," (****",t.account_number.slice(-4),")"]},t.id))]}),a.bankId&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.bankId})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"image_path",className:"flex items-center text-sm font-medium text-gray-600 mb-1",children:[e.jsx($,{size:20,className:"mr-2 text-orange-500"}),"Upload Proof"]}),e.jsx("input",{ref:m,id:"image_path",name:"image_path",type:"file",onChange:i,accept:"image/jpeg,image/png,image/jpg",className:`w-full px-4 py-2 bg-gray-50 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent transition-all ${a.image?"border-red-500":"border-gray-200"}`}),a.image_path&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:a.image_path})]})]}),e.jsx("button",{type:"submit",disabled:y,className:"w-full bg-gray-800 text-white py-3 px-4 rounded-lg hover:bg-black focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:y?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Submit Request"})]}),e.jsxs("div",{className:"px-6 pb-6",children:[x&&e.jsx("div",{className:"mt-4 p-4 bg-red-50 border border-red-100 rounded-lg",children:e.jsxs("p",{className:"text-red-600 text-sm flex items-center",children:[e.jsx(B,{size:16,className:"mr-2"}),x]})}),f&&e.jsx("div",{className:"mt-4 p-4 bg-green-50 border border-green-100 rounded-lg",children:e.jsxs("p",{className:"text-green-600 text-sm flex items-center",children:[e.jsx(P,{size:16,className:"mr-2"}),f]})})]})]})})})};export{X as default};
