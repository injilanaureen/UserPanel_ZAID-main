import{r as p,j as e,a as N}from"./app-scOM1Bov.js";import{A as j}from"./AdminLayout-CpYTA3QK.js";import"./x-Dbx5JJsn.js";import"./createLucideIcon-B6EbXdE0.js";const q=()=>{const[r,m]=p.useState({availableTripId:"",boardingPointId:"",droppingPointId:"",source:"",destination:"",bookingType:"",serviceCharge:"",paymentMode:"",inventoryItems:{0:{seatName:"",fare:"",serviceTax:"",operatorServiceCharge:"",ladiesSeat:"false",passenger:{name:"",title:"Mr",mobile:"",email:"",age:"",gender:"MALE",address:"",idType:"",idNumber:"",primary:"1"}}}}),[c,u]=p.useState(""),[g,v]=p.useState(""),[h,b]=p.useState(!1),s=i=>{const{name:t,value:o}=i.target;m(a=>({...a,[t]:o}))},d=i=>{const{name:t,value:o}=i.target;m(a=>({...a,inventoryItems:{...a.inventoryItems,0:{...a.inventoryItems[0],[t]:o}}}))},n=i=>{const{name:t,value:o}=i.target;m(a=>({...a,inventoryItems:{...a.inventoryItems,0:{...a.inventoryItems[0],passenger:{...a.inventoryItems[0].passenger,[t]:o}}}}))},I=async i=>{var t,o,a,y;i.preventDefault(),u(""),v(""),b(!0);try{const l={availableTripId:Number(r.availableTripId),boardingPointId:Number(r.boardingPointId),droppingPointId:Number(r.droppingPointId),source:r.source,destination:r.destination,bookingType:r.bookingType,serviceCharge:Number(r.serviceCharge),paymentMode:r.paymentMode,inventoryItems:{0:{seatName:r.inventoryItems[0].seatName,fare:Number(r.inventoryItems[0].fare),serviceTax:Number(r.inventoryItems[0].serviceTax),operatorServiceCharge:Number(r.inventoryItems[0].operatorServiceCharge),ladiesSeat:r.inventoryItems[0].ladiesSeat,passenger:{name:r.inventoryItems[0].passenger.name,mobile:Number(r.inventoryItems[0].passenger.mobile),title:r.inventoryItems[0].passenger.title,email:r.inventoryItems[0].passenger.email,age:Number(r.inventoryItems[0].passenger.age),gender:r.inventoryItems[0].passenger.gender,address:r.inventoryItems[0].passenger.address,idType:r.inventoryItems[0].passenger.idType,idNumber:r.inventoryItems[0].passenger.idNumber,primary:r.inventoryItems[0].passenger.primary}}}},x=await N.post("/api/bus/block-ticket",l,{headers:{"Content-Type":"application/json",Accept:"application/json"}});x.data.status==="SUCCESS"?v("Ticket blocked successfully!"):u(x.data.message||"Failed to block ticket")}catch(l){console.error("Error while calling API:",l),u(((o=(t=l.response)==null?void 0:t.data)==null?void 0:o.message)||((y=(a=l.response)==null?void 0:a.data)==null?void 0:y.error)||"An error occurred while processing your request")}finally{b(!1)}};return e.jsx(j,{children:e.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-xl font-bold mb-6",children:"Block Ticket Form"}),c&&e.jsx("div",{className:"mb-4 p-4 bg-red-100 text-red-700 rounded",children:c}),g&&e.jsx("div",{className:"mb-4 p-4 bg-green-100 text-green-700 rounded",children:g}),e.jsxs("form",{onSubmit:I,className:"grid grid-cols-2 gap-4",children:[e.jsx("label",{className:"col-span-2 font-semibold",children:"Trip Information"}),e.jsx("input",{type:"number",name:"availableTripId",placeholder:"Available Trip ID",value:r.availableTripId,onChange:s,className:"p-2 border rounded",required:!0}),e.jsx("input",{type:"number",name:"boardingPointId",placeholder:"Boarding Point ID",value:r.boardingPointId,onChange:s,className:"p-2 border rounded",required:!0}),e.jsx("input",{type:"number",name:"droppingPointId",placeholder:"Dropping Point ID",value:r.droppingPointId,onChange:s,className:"p-2 border rounded",required:!0}),e.jsx("input",{type:"text",name:"source",placeholder:"Source",value:r.source,onChange:s,className:"p-2 border rounded",required:!0}),e.jsx("input",{type:"text",name:"destination",placeholder:"Destination",value:r.destination,onChange:s,className:"p-2 border rounded",required:!0}),e.jsxs("select",{name:"bookingType",value:r.bookingType,onChange:s,className:"p-2 border rounded",required:!0,children:[e.jsx("option",{value:"",children:"Select Booking Type"}),e.jsx("option",{value:"STANDARD",children:"STANDARD"})]}),e.jsx("input",{type:"number",name:"serviceCharge",placeholder:"Service Charge",step:"0.01",value:r.serviceCharge,onChange:s,className:"p-2 border rounded",required:!0}),e.jsxs("select",{name:"paymentMode",value:r.paymentMode,onChange:s,className:"p-2 border rounded",required:!0,children:[e.jsx("option",{value:"",children:"Select Payment Mode"}),e.jsx("option",{value:"CASH",children:"Cash"}),e.jsx("option",{value:"CARD",children:"Card"}),e.jsx("option",{value:"UPI",children:"UPI"}),e.jsx("option",{value:"NETBANKING",children:"Net Banking"})]}),e.jsx("label",{className:"col-span-2 font-semibold mt-4",children:"Seat & Pricing Information"}),e.jsx("input",{type:"text",name:"seatName",placeholder:"Seat Name",value:r.inventoryItems[0].seatName,onChange:d,className:"p-2 border rounded",required:!0}),e.jsx("input",{type:"number",name:"fare",placeholder:"Fare",step:"0.01",value:r.inventoryItems[0].fare,onChange:d,className:"p-2 border rounded",required:!0}),e.jsx("input",{type:"number",name:"serviceTax",placeholder:"Service Tax",step:"0.01",value:r.inventoryItems[0].serviceTax,onChange:d,className:"p-2 border rounded",required:!0}),e.jsx("input",{type:"number",name:"operatorServiceCharge",placeholder:"Operator Service Charge",step:"0.01",value:r.inventoryItems[0].operatorServiceCharge,onChange:d,className:"p-2 border rounded",required:!0}),e.jsxs("select",{name:"ladiesSeat",value:r.inventoryItems[0].ladiesSeat,onChange:d,className:"p-2 border rounded",required:!0,children:[e.jsx("option",{value:"false",children:"No"}),e.jsx("option",{value:"true",children:"Yes"})]}),e.jsx("label",{className:"col-span-2 font-semibold mt-4",children:"Passenger Information"}),e.jsx("input",{type:"text",name:"name",placeholder:"Passenger Name",value:r.inventoryItems[0].passenger.name,onChange:n,className:"p-2 border rounded",required:!0}),e.jsxs("select",{name:"title",value:r.inventoryItems[0].passenger.title,onChange:n,className:"p-2 border rounded",required:!0,children:[e.jsx("option",{value:"Mr",children:"Mr"}),e.jsx("option",{value:"Ms",children:"Ms"}),e.jsx("option",{value:"Mrs",children:"Mrs"})]}),e.jsx("input",{type:"tel",name:"mobile",placeholder:"Mobile Number",value:r.inventoryItems[0].passenger.mobile,onChange:n,className:"p-2 border rounded",required:!0}),e.jsx("input",{type:"email",name:"email",placeholder:"Email Address",value:r.inventoryItems[0].passenger.email,onChange:n,className:"p-2 border rounded",required:!0}),e.jsx("input",{type:"number",name:"age",placeholder:"Age",value:r.inventoryItems[0].passenger.age,onChange:n,className:"p-2 border rounded",required:!0}),e.jsxs("select",{name:"gender",value:r.inventoryItems[0].passenger.gender,onChange:n,className:"p-2 border rounded",required:!0,children:[e.jsx("option",{value:"MALE",children:"Male"}),e.jsx("option",{value:"FEMALE",children:"Female"})]}),e.jsx("input",{type:"text",name:"address",placeholder:"Address",value:r.inventoryItems[0].passenger.address,onChange:n,className:"p-2 border rounded",required:!0}),e.jsx("input",{type:"text",name:"idType",placeholder:"ID Type (e.g., Aadhar, PAN)",value:r.inventoryItems[0].passenger.idType,onChange:n,className:"p-2 border rounded",required:!0}),e.jsx("input",{type:"text",name:"idNumber",placeholder:"ID Number",value:r.inventoryItems[0].passenger.idNumber,onChange:n,className:"p-2 border rounded",required:!0}),e.jsxs("select",{name:"primary",value:r.inventoryItems[0].passenger.primary,onChange:n,className:"p-2 border rounded",required:!0,children:[e.jsx("option",{value:"1",children:"Yes"}),e.jsx("option",{value:"0",children:"No"})]}),e.jsx("button",{type:"submit",className:"col-span-2 p-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed mt-4",disabled:h,children:h?"Processing...":"Block Ticket"})]})]})})};export{q as default};
