import{K as N,r as p,j as e,S as v}from"./app-04dva_uV.js";import{A as I}from"./AdminLayout-BQfvYX0n.js";import"./x-BsVjYVey.js";import"./createLucideIcon-CR20qr5H.js";import"./log-out-DndPUm7A.js";const E=()=>{const{bankAccounts:x,errors:f}=N().props,c=p.useRef(null),[s,m]=p.useState({transactionType:"",amount:"",transactionId:"",depositedDate:"",bankId:"",image:null}),[b,d]=p.useState({}),g=a=>{const n={};if(!a)return n;const l=["image/jpeg","image/png","image/jpg"],o=5*1024*1024;return l.includes(a.type)||(n.image="Only JPEG, JPG, and PNG images are allowed"),a.size>o&&(n.image="Image size should not exceed 5MB"),n},i=a=>{const{name:n,value:l,files:o}=a.target;if(n==="image"){const r=o[0],y=g(r);m(u=>({...u,image:r})),d(u=>({...u,...y}))}else m(r=>({...r,[n]:l}));b[n]&&d(r=>({...r,[n]:null}))},h=()=>{const a={};if(s.transactionType||(a.transactionType="Transaction Type is required"),s.amount?parseFloat(s.amount)<=0&&(a.amount="Amount must be greater than zero"):a.amount="Amount is required",s.transactionId||(a.transactionId="Transaction ID is required"),s.depositedDate||(a.depositedDate="Deposited Date is required"),s.bankId||(a.bankId="Bank selection is required"),s.image){const n=g(s.image);n.image&&(a.image=n.image)}return a},j=a=>{a.preventDefault();const n=h();if(Object.keys(n).length>0){d(n);return}const l=new FormData;Object.entries(s).forEach(([o,r])=>{r!==null&&r!==""&&l.append(o,r)}),v.post("/fundrequest/store",l,{forceFormData:!0,preserveState:!0,preserveScroll:!0,onSuccess:()=>{m({transactionType:"",amount:"",transactionId:"",depositedDate:"",bankId:"",image:null}),d({}),c.current&&(c.current.value=null)},onError:o=>{d(o)}})},t={...b,...f};return e.jsx(I,{children:e.jsx("div",{className:"min-h-screen bg-gray-100 p-6",children:e.jsxs("div",{className:"max-w-2xl mx-auto bg-white p-6 rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-xl font-semibold mb-6 text-gray-800",children:"Fund Request"}),e.jsxs("form",{onSubmit:j,encType:"multipart/form-data",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Transaction Type"}),e.jsxs("select",{name:"transactionType",value:s.transactionType,onChange:i,className:`w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 ${t.transactionType?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"-- Select Type --"}),e.jsx("option",{value:"NEFT",children:"NEFT"}),e.jsx("option",{value:"RTGS",children:"RTGS"}),e.jsx("option",{value:"IMPS",children:"IMPS"})]}),t.transactionType&&e.jsx("span",{className:"text-red-500 text-sm mt-1",children:t.transactionType})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Amount"}),e.jsx("input",{name:"amount",type:"number",value:s.amount,onChange:i,className:`w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 ${t.amount?"border-red-500":"border-gray-300"}`,placeholder:"Enter Amount",min:"1",step:"0.01"}),t.amount&&e.jsx("span",{className:"text-red-500 text-sm mt-1",children:t.amount})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Transaction ID"}),e.jsx("input",{name:"transactionId",type:"text",value:s.transactionId,onChange:i,className:`w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 ${t.transactionId?"border-red-500":"border-gray-300"}`,placeholder:"Enter Transaction ID"}),t.transactionId&&e.jsx("span",{className:"text-red-500 text-sm mt-1",children:t.transactionId})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Deposited Date"}),e.jsx("input",{name:"depositedDate",type:"date",value:s.depositedDate,onChange:i,className:`w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 ${t.depositedDate?"border-red-500":"border-gray-300"}`,max:new Date().toISOString().split("T")[0]}),t.depositedDate&&e.jsx("span",{className:"text-red-500 text-sm mt-1",children:t.depositedDate})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Bank Account"}),e.jsxs("select",{name:"bankId",value:s.bankId,onChange:i,className:`w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 ${t.bankId?"border-red-500":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"-- Select Bank Account --"}),x.map(a=>e.jsxs("option",{value:a.id,children:[a.bank," - ",a.account_name," (****",a.account_number.slice(-4),")"]},a.id))]}),t.bankId&&e.jsx("span",{className:"text-red-500 text-sm mt-1",children:t.bankId})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Upload Proof (Image only)"}),e.jsx("input",{ref:c,name:"image",type:"file",onChange:i,accept:"image/jpeg,image/png,image/jpg",className:"w-full p-2 border border-gray-300 rounded file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:bg-blue-500 file:text-white hover:file:bg-blue-600"}),t.image&&e.jsx("span",{className:"text-red-500 text-sm mt-1",children:t.image})]}),e.jsx("button",{type:"submit",className:"w-full bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 transition duration-200",children:"Submit Request"})]})]})})})};export{E as default};
