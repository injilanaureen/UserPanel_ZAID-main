import{r as n,j as t}from"./app-DFNezYz6.js";import{c as u}from"./utils-CiMRq3MP.js";import{S as D}from"./index-BJwnbu9K.js";import{c as I}from"./clsx-B-dksMZM.js";import{L as S}from"./loader-circle-BmG2J_pL.js";import"./createLucideIcon-9k6RJPFL.js";const N=n.forwardRef(({className:s,...a},e)=>t.jsx("div",{ref:e,className:u("rounded-xl border bg-card text-card-foreground shadow",s),...a}));N.displayName="Card";const k=n.forwardRef(({className:s,...a},e)=>t.jsx("div",{ref:e,className:u("flex flex-col space-y-1.5 p-6",s),...a}));k.displayName="CardHeader";const T=n.forwardRef(({className:s,...a},e)=>t.jsx("div",{ref:e,className:u("font-semibold leading-none tracking-tight",s),...a}));T.displayName="CardTitle";const O=n.forwardRef(({className:s,...a},e)=>t.jsx("div",{ref:e,className:u("text-sm text-muted-foreground",s),...a}));O.displayName="CardDescription";const w=n.forwardRef(({className:s,...a},e)=>t.jsx("div",{ref:e,className:u("p-6 pt-0",s),...a}));w.displayName="CardContent";const A=n.forwardRef(({className:s,...a},e)=>t.jsx("div",{ref:e,className:u("flex items-center p-6 pt-0",s),...a}));A.displayName="CardFooter";const C=n.forwardRef(({className:s,type:a,...e},i)=>t.jsx("input",{type:a,className:u("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:i,...e}));C.displayName="Input";const y=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,b=I,V=(s,a)=>e=>{var i;if((a==null?void 0:a.variants)==null)return b(s,e==null?void 0:e.class,e==null?void 0:e.className);const{variants:m,defaultVariants:o}=a,f=Object.keys(m).map(r=>{const d=e==null?void 0:e[r],l=o==null?void 0:o[r];if(d===null)return null;const x=y(d)||y(l);return m[r][x]}),h=e&&Object.entries(e).reduce((r,d)=>{let[l,x]=d;return x===void 0||(r[l]=x),r},{}),v=a==null||(i=a.compoundVariants)===null||i===void 0?void 0:i.reduce((r,d)=>{let{class:l,className:x,...g}=d;return Object.entries(g).every(j=>{let[c,p]=j;return Array.isArray(p)?p.includes({...o,...h}[c]):{...o,...h}[c]===p})?[...r,l,x]:r},[]);return b(s,f,v,e==null?void 0:e.class,e==null?void 0:e.className)},E=V("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),R=n.forwardRef(({className:s,variant:a,size:e,asChild:i=!1,...m},o)=>{const f=i?D:"button";return t.jsx(f,{className:u(E({variant:a,size:e,className:s})),ref:o,...m})});R.displayName="Button";const z=()=>{const[s,a]=n.useState(""),[e,i]=n.useState(null),[m,o]=n.useState(!1),[f,h]=n.useState(null),v={Authorisedkey:"Y2RkZTc2ZmNjODgxODljMjkyN2ViOTlhM2FiZmYyM2I=",Token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0aW1lc3RhbXAiOjE3NDAwNTE4MDYsInBhcnRuZXJJZCI6IlBTMDAxNTY4IiwicmVxaWQiOiIxNzQwMDUxODA2In0.fgh6KhbJ3WFbs4EuPoxDC65D0ESLOVYjf_toFvchjvc",Accept:"text/plain","Content-Type":"application/json"},r=async d=>{d.preventDefault(),o(!0),h(null);try{const g=(await(await fetch("/get-csrf-token")).json()).csrf_token,c=await(await fetch("https://sit.paysprint.in/service-api/api/v1/service/bill-payment/bill/licstatus",{method:"POST",headers:v,body:JSON.stringify({referenceid:s})})).json();if(console.log("API Response:",c.data),i(c),c.status){if(!(await fetch("/save-lic-status",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":g},body:JSON.stringify(c.data)})).ok)throw new Error("Failed to save data to the backend");console.log("Data saved successfully")}else h({type:"error",text:c.message})}catch(l){console.error("Error in checkStatus:",l),h({type:"error",text:"An error occurred while processing the request"})}finally{o(!1)}};return t.jsx(N,{className:"w-full max-w-2xl mx-auto",children:t.jsxs(w,{className:"p-6",children:[t.jsxs("form",{onSubmit:r,className:"space-y-4",children:[t.jsx(C,{type:"text",placeholder:"Reference ID",value:s,onChange:d=>a(d.target.value),required:!0,className:"w-full"}),t.jsx(R,{type:"submit",disabled:m,className:"w-full",children:m?t.jsx(S,{className:"mr-2 h-4 w-4 animate-spin"}):"Check Status"})]}),f&&t.jsx("div",{className:`mt-4 p-3 rounded-md ${f.type==="error"?"bg-red-100 text-red-600":"bg-green-100 text-green-600"}`,children:f.text}),e&&e.status&&t.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[t.jsx("h3",{className:"font-medium mb-2",children:"Transaction Details:"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Txn ID:"})," ",e.data.txnid]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Operator Name:"})," ",e.data.operatorname]}),t.jsxs("p",{children:[t.jsx("strong",{children:"CA Number:"})," ",e.data.canumber]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Amount:"})," ",e.data.amount]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Commission:"})," ",e.data.comm]}),t.jsxs("p",{children:[t.jsx("strong",{children:"TDS:"})," ",e.data.tds]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Status:"})," ",e.data.status==="0"?"Pending":"Completed"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Reference ID:"})," ",e.data.refid]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Refunded:"})," ",e.data.refunded==="1"?"Yes":"No"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Date Added:"})," ",e.data.dateadded]}),e.data.refunded==="1"&&t.jsxs(t.Fragment,{children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Refund Txn ID:"})," ",e.data.refundtxnid]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Date Refunded:"})," ",e.data.daterefunded]})]})]})]})]})})};export{z as default};
